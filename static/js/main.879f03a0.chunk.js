(this["webpackJsonpproductivity-tools-web"]=this["webpackJsonpproductivity-tools-web"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(10),l=a(24),s=a(6),u=a(7),m=a(9),d=a(8),E=a(13),f=a(12),v=a(4),h=a(1),p={errors:[]};function b(e){return{type:"ERROR_CLOSE",payload:e}}function y(e){return{type:"ERROR_REMOVE",payload:e}}var g=function(e){return function(t){var a=Date.now().toString(36)+Math.random().toString(36).substr(2);t({type:"ERROR_DISPLAY",payload:{id:a,message:e,isVisible:!0}}),setTimeout((function(){return t(b(a))}),3e3),setTimeout((function(){return t(y(a))}),5e3)}},O=function(e){return e.errorsReducer.errors},j=(a(76),a(23)),C=a(20),S=(a(79),["dark-grey","medium-grey","faded-grey","white","blue","red","green","purple"]),T=["sm","md"];function R(e){var t=e.className,a=e.isLink,n=e.isRounded,c=e.size,i=e.color,o=e.icon,l=e.children,s=Object(j.a)(e,["className","isLink","isRounded","size","color","icon","children"]),u=["btn"];t&&u.push(t),n&&u.push("btn-rounded"),T.includes(c)&&"md"!==i&&u.push("btn-".concat(c)),S.includes(i)&&"dark-grey"!==i&&u.push("btn-".concat(i));var m=r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(C.a,{className:l?"mr-10":"",icon:o}),l);return a?r.a.createElement(f.b,Object.assign({className:u.join(" ")},s),m):r.a.createElement("button",Object.assign({className:u.join(" ")},s),m)}var k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.errors,a=e.closeError;return r.a.createElement("div",{className:"error-wrapper"},t.map((function(e){var t=e.id,n=e.isVisible,c=e.message;return r.a.createElement("div",{className:"box error".concat(n?"":" error-hide"),key:t},r.a.createElement("div",{className:"error-header"},r.a.createElement("p",{className:"m-0"},"Error"),r.a.createElement(R,{className:"error-close-button",color:"white",icon:v.u,onClick:function(){return a(t)}})),r.a.createElement("p",{className:"m-0"},c))})))}}]),a}(n.Component),N={closeError:function(e){return function(t){t(b(e)),setTimeout((function(){return t(y(e))}),2e3)}}},D=Object(o.b)((function(e){return{errors:O(e)}}),N)(k);a(81);function L(){return r.a.createElement("div",{className:"loader"})}var I=a(14);function A(e){var t=e.breadcrumbs,a=Object(j.a)(e,["breadcrumbs"]);return r.a.createElement("p",a,t.map((function(e,a){var c=e.title,i=(e.className,Object(j.a)(e,["title","className"]));return a<t.length-1?r.a.createElement(n.Fragment,{key:a},r.a.createElement(f.b,i,c),r.a.createElement(C.a,{icon:v.e,className:"mx-5"})):r.a.createElement("span",Object.assign({key:a},i),c)})))}function w(){return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Productivity Tools")),r.a.createElement(A,{breadcrumbs:[{title:"Home"}]}),r.a.createElement("h1",null,"Welcome to Productivity Tools!"),r.a.createElement("div",{className:"mb-30 btn-group"},r.a.createElement(R,{isLink:!0,to:"/profile",icon:v.x},"Profile"),r.a.createElement(R,{isLink:!0,to:"/logout",color:"faded-grey",icon:v.q},"Log Out")),r.a.createElement("div",{className:"btn-group btn-group-vertical"},r.a.createElement(R,{isLink:!0,to:"/days-since",color:"blue",icon:v.a},"Days Since"),r.a.createElement(R,{isLink:!0,to:"/time-cycles",color:"purple",icon:v.g},"Time Cycles")))}var U=a(56),M=a.n(U);function V(){return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Not Found")),r.a.createElement("div",{className:"center mt-40"},r.a.createElement("img",{src:M.a,alt:"Creatures hiding behind trees"}),r.a.createElement("div",{className:"mb-20"},r.a.createElement("h1",null,"404 Not Found"),r.a.createElement("p",null,"Sorry, we can't seem to find the page that you're looking for.")),r.a.createElement(R,{isLink:!0,to:"/",icon:v.d},"Return to Home")))}var x=a(2),P=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleChange=function(t){e.setState(Object(x.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.props.onSubmit({username:n,password:r})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{name:"username",id:"username",type:"text",onChange:this.handleChange,value:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{name:"password",id:"password",type:"password",onChange:this.handleChange,value:a,required:!0})),r.a.createElement(R,{icon:v.k},"Submit"))}}]),a}(n.Component),_=a(5),F=a.n(_),q=a(31),z=a.n(q),Y="https://rtkleong10-productivity-tools.herokuapp.com",Q="".concat(Y,"/auth"),H="".concat(Y,"/api"),W="createModalVisible",B="editModalVisible",G="deleteModalVisible",K="REQUEST",$="SUCCESS",J="FAILURE",Z={CREATE:"CREATE",RETRIEVE:"RETRIEVE",UPDATE:"UPDATE",DELETE:"DELETE",LIST:"LIST"};function X(e){var t=e.toUpperCase();return{REQUEST:"".concat(t,"_").concat(K),SUCCESS:"".concat(t,"_").concat($),FAILURE:"".concat(t,"_").concat(J)}}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:e,payload:t}}function te(e,t,a,n){return{type:"".concat(e.toUpperCase(),"_").concat(t,"_").concat(a),payload:n}}function ae(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",r={loading:(t={},Object(x.a)(t,Z.CREATE,!0),Object(x.a)(t,Z.RETRIEVE,!0),Object(x.a)(t,Z.UPDATE,!0),Object(x.a)(t,Z.DELETE,!0),Object(x.a)(t,Z.LIST,!0),t),error:(a={},Object(x.a)(a,Z.CREATE,null),Object(x.a)(a,Z.RETRIEVE,null),Object(x.a)(a,Z.UPDATE,null),Object(x.a)(a,Z.DELETE,null),Object(x.a)(a,Z.LIST,null),a),items:[],item:null,itemId:null};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0,c=/^(.+)_(.+)_(.+)$/,i=a.type.match(c);if(!i)return t;var o=i[1],s=i[2],u=i[3];if(o!==e.toUpperCase()||!Object.values(Z).includes(u))return t;switch(s){case K:return Object(h.a)(Object(h.a)({},t),{},{loading:Object(h.a)(Object(h.a)({},t.loading),{},Object(x.a)({},u,!0)),error:Object(h.a)(Object(h.a)({},t.error),{},Object(x.a)({},u,null)),itemId:a.payload?a.payload:t.itemId});case $:switch(u){case Z.CREATE:return Object(h.a)(Object(h.a)({},t),{},{loading:Object(h.a)(Object(h.a)({},t.loading),{},Object(x.a)({},u,!1)),items:[].concat(Object(l.a)(t.items),[a.payload])});case Z.RETRIEVE:return Object(h.a)(Object(h.a)({},t),{},{loading:Object(h.a)(Object(h.a)({},t.loading),{},Object(x.a)({},u,!1)),item:a.payload});case Z.UPDATE:return Object(h.a)(Object(h.a)({},t),{},{loading:Object(h.a)(Object(h.a)({},t.loading),{},Object(x.a)({},u,!1)),items:t.items.map((function(e){return e[n]===a.payload[n]?Object(h.a)(Object(h.a)({},e),a.payload):e})),item:a.payload});case Z.DELETE:return Object(h.a)(Object(h.a)({},t),{},{loading:Object(h.a)(Object(h.a)({},t.loading),{},Object(x.a)({},u,!1)),error:Object(h.a)(Object(h.a)({},t.error),{},Object(x.a)({},Z.RETRIEVE,t.item&&t.item[n]===a.payload?"Deleted":t.error[Z.RETRIEVE])),items:t.items.filter((function(e){return e[n]!==a.payload}))});case Z.LIST:return Object(h.a)(Object(h.a)({},t),{},{loading:Object(h.a)(Object(h.a)({},t.loading),{},Object(x.a)({},u,!1)),items:a.payload});default:return t}case J:return Object(h.a)(Object(h.a)({},t),{},{loading:Object(h.a)(Object(h.a)({},t.loading),{},Object(x.a)({},u,!1)),error:Object(h.a)(Object(h.a)({},t.error),{},Object(x.a)({},u,a.payload))});default:return t}}}var ne=function(e){return{headers:{Authorization:"Bearer "+e().authReducer.accessToken}}},re=function(e,t,a){e&&e.response&&401===e.response.status?g("Your session has expired. Please refresh the page.")(t):g(a)(t)},ce=X("LOGIN"),ie=X("SIGNUP"),oe={accessToken:null,refreshToken:z.a.get("refreshToken"),loginLoading:!1,loginError:null,signupLoading:!1,signupError:null};var le=function(e){var t=e.username,a=e.password;return function(e){return e(ee(ce.REQUEST)),F.a.post("".concat(Q,"/jwt/create/"),{username:t,password:a}).then((function(t){e(ee(ce.SUCCESS,t.data))})).catch((function(t){g("Unable to log in.")(e),e(ee(ce.FAILURE,t))}))}},se=function(e){return e.authReducer.refreshToken},ue=function(e){return e.authReducer.accessToken},me=function(e){return e.authReducer.loginLoading},de=function(e){return e.authReducer.loginError};var Ee={authLogin:le},fe=Object(o.b)((function(){return{}}),Ee)((function(e){var t=e.authLogin;return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Log In")),r.a.createElement("h1",null,"Log In"),r.a.createElement("div",{className:"box my-20"},r.a.createElement(P,{onSubmit:t})),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(f.b,{to:"/signup"},"Sign up here")))})),ve=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Logged Out")),r.a.createElement("h1",null,"You have logged out."),r.a.createElement("p",null,"We hope you come back soon!"),r.a.createElement(R,{isLink:!0,to:"/",icon:v.d},"Return to Home"))}}]),a}(n.Component),he={logout:function(){return function(e){e(ee("LOGOUT"))}}},pe=Object(o.b)((function(){return{}}),he)(ve),be=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",username:"",password:"",password2:""},e.handleChange=function(t){e.setState(Object(x.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,r=a.username,c=a.password;c===a.password2?e.props.onSubmit({email:n,username:r,password:c}):alert("Passwords don't match")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.username,n=e.password,c=e.password2;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",type:"email",onChange:this.handleChange,value:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"username",type:"text",onChange:this.handleChange,value:a,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{autoComplete:"new-password",name:"password",type:"password",onChange:this.handleChange,value:n,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{name:"password2",type:"password",onChange:this.handleChange,value:c,required:!0})),r.a.createElement(R,{icon:v.k},"Submit"))}}]),a}(n.Component);var ye={signup:function(e){var t=e.email,a=e.username,n=e.password;return function(e){return e(ee(ie.REQUEST)),F.a.post("".concat(Q,"/users/"),{email:t,username:a,password:n}).then((function(t){e(ee(ie.SUCCESS,t.data)),le({username:a,password:n})(e)})).catch((function(t){g("Unable to sign up.")(e),e(ee(ie.FAILURE,t))}))}}},ge=Object(o.b)((function(){return{}}),ye)((function(e){var t=e.signup;return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Sign Up")),r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:"box my-20"},r.a.createElement(be,{onSubmit:t})),r.a.createElement("p",null,"Already have an account? ",r.a.createElement(f.b,{to:"/login"},"Log in here")))})),Oe=a(65);a(98);function je(e){var t=e.options,a=e.value,n=e.onChange,c=e.disabled,i=e.required,o=Object(j.a)(e,["options","value","onChange","disabled","required"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,Object.assign({className:"select-container",classNamePrefix:"select",placeholder:"Select an option",components:{IndicatorSeparator:function(){return null}},options:t,disabled:c,value:a?t.find((function(e){return e.value===a})):null,onChange:function(e){return n(e.value)}},o)),!c&&i&&r.a.createElement("input",{tabIndex:-1,autoComplete:"off",style:{opacity:0,height:0,padding:0,margin:0},value:a||"",onChange:function(){},required:!0}))}var Ce=X("TIMEZONES"),Se={items:[],loading:!0,error:null};var Te=function(e){return!0===e.timezonesReducer.loading},Re=function(e){return e.timezonesReducer.error},ke=function(e){return e.timezonesReducer.items};var Ne={listTimezones:function(){return function(e){return e(ee(Ce.REQUEST)),F.a.get("".concat(H,"/timezones/")).then((function(t){e(ee(Ce.SUCCESS,t.data))})).catch((function(t){re(t,e,"Unable to fetch timezones."),e(ee(Ce.FAILURE,t))}))}}},De=Object(o.b)((function(e){return{timezones:ke(e),timezonesLoading:Te(e),timezonesError:Re(e)}}),Ne)((function(e){var t=e.timezones,a=e.timezonesLoading,c=e.listTimezones;Object(n.useEffect)((function(){c()}),[c]);var i=[];return t&&(i=t.map((function(e){return{value:e,label:e.replace("_"," ")}}))),r.a.createElement(je,Object.assign({placeholder:"Select a timezone",isLoading:a,options:i},e))})),Le=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={timezone:null},e.handleTimezoneChange=function(t){e.setState({timezone:t})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.timezone;e.props.onSubmit({timezone:a})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.profile.timezone;this.setState({timezone:e})}},{key:"render",value:function(){var e=this.state.timezone;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"timezone"},"Timezone"),r.a.createElement(De,{id:"timezone",onChange:this.handleTimezoneChange,value:e,required:!0})),r.a.createElement(R,{icon:v.p},"Save"))}}]),a}(n.Component),Ie=ae("profile"),Ae=function(e){return!0===e.profileReducer.loading[Z.RETRIEVE]},we=function(e){return e.profileReducer.error[Z.RETRIEVE]},Ue=function(e){return e.profileReducer.item};var Me={retrieveProfile:function(){return function(e,t){return e(te("profile",K,Z.RETRIEVE)),F.a.get("".concat(H,"/").concat("profile","/"),ne(t)).then((function(t){e(te("profile",$,Z.RETRIEVE,t.data))})).catch((function(t){re(t,e,"Unable to fetch profile."),e(te("profile",J,Z.RETRIEVE,t))}))}},updateProfile:function(e){var t=e.timezone;return function(e,a){return e(te("profile",K,Z.UPDATE)),F.a.patch("".concat(H,"/").concat("profile","/"),{timezone:t},ne(a)).then((function(t){e(te("profile",$,Z.UPDATE,t.data))})).catch((function(t){re(t,e,"Unable to update profile."),e(te("profile",J,Z.UPDATE,t))}))}}},Ve=Object(o.b)((function(e){return{profile:Ue(e),profileLoading:Ae(e),profileError:we(e)}}),Me)((function(e){var t=e.retrieveProfile,a=e.updateProfile,c=e.profile,i=e.profileLoading,o=e.profileError;return Object(n.useEffect)((function(){t()}),[t]),i?r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Profile")),r.a.createElement(A,{breadcrumbs:[{title:"Home",to:"/"},{title:"Profile"}]}),r.a.createElement("h1",null,"Profile"),r.a.createElement(L,null)):!c||o?r.a.createElement(E.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Profile")),r.a.createElement(A,{breadcrumbs:[{title:"Home",to:"/"},{title:"Profile"}]}),r.a.createElement("h1",null,"Profile"),r.a.createElement(Le,{profile:c,onSubmit:a}))})),xe=[{path:"/login",exact:!0,component:fe},{path:"/signup",exact:!0,component:ge},{path:"/logout",exact:!0,component:pe}],Pe=[{path:"/logout",exact:!0,component:pe},{path:"/profile",exact:!0,component:Ve}],_e=a(25),Fe=(a(99),document.getElementById("modal-root")),qe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleKeyDown=function(e){switch(e.keyCode){case 27:n.handleClose()}},n.handleClose=function(){var e=n.props.onVisibilityChange;n.setState({draftIsVisible:!1}),e&&e(!1)},n.state={draftIsVisible:!1},n.el=document.createElement("div"),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),Fe.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),Fe.removeChild(this.el)}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,n=e.isVisible,c=(e.onVisibilityChange,Object(j.a)(e,["title","children","isVisible","onVisibilityChange"])),o=this.state.draftIsVisible,l=null!==n&&void 0!==n?n:o;return i.a.createPortal(r.a.createElement("div",Object.assign({className:"modal".concat(l?"":" modal-hide")},c),r.a.createElement("div",{className:"modal-bg",onClick:this.handleClose}),r.a.createElement("div",{className:"modal-content"},t&&r.a.createElement("div",{className:"modal-header"},r.a.createElement("p",{className:"modal-title"},t),r.a.createElement(R,{className:"modal-close-button",color:"white",icon:v.u,onClick:this.handleClose})),a)),this.el)}}]),a}(n.Component),ze=X("COLORS"),Ye={items:[],loading:!0,error:null};var Qe=function(){return function(e){return e(ee(ze.REQUEST)),F.a.get("".concat(H,"/colors/")).then((function(t){e(ee(ze.SUCCESS,t.data))})).catch((function(t){re(t,e,"Unable to fetch colours."),e(ee(ze.FAILURE,t))}))}},He=function(e){return!0===e.colorsReducer.loading},We=function(e){return e.colorsReducer.error},Be=function(e){return e.colorsReducer.items},Ge=function(e){return{alignItems:"center",display:"flex",":before":{backgroundColor:e,borderRadius:15,content:'""',display:"block",marginRight:10,height:15,width:15}}},Ke={option:function(e,t){var a=t.data;return Object(h.a)(Object(h.a)({},e),Ge(a.hex_code))},singleValue:function(e,t){var a=t.data;return Object(h.a)(Object(h.a)({},e),Ge(a.hex_code))}};var $e={listColors:Qe},Je=Object(o.b)((function(e){return{colors:Be(e),colorsLoading:He(e),colorsError:We(e)}}),$e)((function(e){var t=e.colors,a=e.colorsLoading,c=e.colorsError,i=e.listColors;Object(n.useEffect)((function(){t&&0!==t.length||i()}),[t,a,c,i]);var o=[];return t&&(o=t.map((function(e){return{value:e.id,label:e.title,hex_code:e.hex_code}}))),r.a.createElement(je,Object.assign({placeholder:"Select a color",isLoading:a,options:o,styles:Ke,isSearchable:!1},e))})),Ze=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",description:"",frequency:"",color:void 0},e.reset=function(t){if(t){var a=t.title,n=t.description,r=t.frequency,c=t.color;e.setState({title:a,description:n,frequency:null===r?"":r,color:c})}else e.setState({title:"",description:"",frequency:"",color:void 0})},e.handleChange=function(t){e.setState(Object(x.a)({},t.target.name,t.target.value))},e.handleColorChange=function(t){e.setState({color:t})},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.title,r=a.description,c=a.frequency,i=a.color;e.props.onSubmit({title:n,description:r,frequency:parseInt(c),color:i})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.frequency,c=e.color;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",name:"title",type:"text",maxLength:"200",onChange:this.handleChange,value:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",name:"description",onChange:this.handleChange,value:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"frequency"},"Frequency"),r.a.createElement("input",{id:"frequency",name:"frequency",type:"number",min:1,step:1,onChange:this.handleChange,value:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"color"},"Color"),r.a.createElement(Je,{name:"color",onChange:this.handleColorChange,value:c,required:!0})),r.a.createElement(R,{icon:v.k},"Submit"))}}]),a}(n.Component),Xe=function(e){if(e){var t=e.split("\n");return t.map((function(e,a){return r.a.createElement(n.Fragment,{key:a},e,a+1<t.length?r.a.createElement("br",null):"")}))}return e};a(100);function et(e){var t=Object(n.useRef)(),a=e.days_since,c=e.frequency,i=e.color,o=c-a,l=function(e){return e>=0?1===e?"1 day\nleft":e>99?">99 days\nleft":"".concat(e," days\nleft"):-1===e?"1 day\nlate":e<-99?">99 days\nlate":"".concat(Math.abs(e)," days\nlate")}(o),s=Math.max(a/c,0);Object(n.useEffect)((function(){var e=new Date,a=t.current;if(a){var n=a.getContext("2d");!function t(){var r=a.width,c=a.height,o=r/2,l=c/2,u=new Date-e,m=u<800?Math.pow(Math.sin(Math.PI*(u/800)/2),2):1;n.globalCompositeOperation="destination-over",n.clearRect(0,0,r,c),n.save(),n.fillStyle=i,n.beginPath(),n.moveTo(o,l),n.arc(o,l,r/2,-Math.PI/2,-Math.PI/2+2*s*Math.PI*m),n.lineTo(o,l),n.closePath(),n.fill(),n.restore(),u<800&&requestAnimationFrame(t)}()}}),[i,s]);var u=r.a.createElement("div",{className:"inner-circle"},r.a.createElement("p",null,Xe(l)),r.a.createElement("p",{className:"mobile-text"},Math.abs(o)<=99?"".concat(Math.abs(o),"d"):">99d",r.a.createElement("br",null),"".concat(o>=0?"left":"late")));return o>=0?r.a.createElement("div",{className:"days-since-display progress-circle"},r.a.createElement("canvas",{className:"outer-circle",ref:t,height:"200px",width:"200px"}),u):r.a.createElement("div",{className:"days-since-display progress-circle",style:{backgroundColor:i}},r.a.createElement("div",{className:"outer-circle outer-circle-overdue"}),u)}var tt=1,at=2,nt=[{value:tt,label:"Completed"},{value:at,label:"Skipped"}];function rt(e){return 1===e?"Everyday":2===e?"Every other day":7===e?"Every week":14===e?"Every other week":e%7===0?"Every ".concat(Math.round(e/7)," weeks"):"Every ".concat(e," days")}var ct=ae("activities"),it=function(e){return!0===e.activitiesReducer.loading[Z.LIST]},ot=function(e){return e.activitiesReducer.error[Z.LIST]},lt=function(e){return e.activitiesReducer.items},st=function(e){return!0===e.activitiesReducer.loading[Z.RETRIEVE]},ut=function(e){return e.activitiesReducer.error[Z.RETRIEVE]},mt=function(e){return e.activitiesReducer.item},dt=function(e){return e.activitiesReducer.itemId},Et=ae("activityevents"),ft=function(e){return!0===e.activityEventsReducer.loading[Z.LIST]},vt=function(e){return e.activityEventsReducer.error[Z.LIST]},ht=function(e){return e.activityEventsReducer.items};a(101);function pt(e){switch(e){case tt:return"Last completed";case at:return"Last skipped";default:return"Created"}}function bt(e){return e<0?"".concat(Math.abs(e)," days in the future"):0===e?"today":1===e?"yesterday":e<7?"".concat(e," days ago"):e>=7&&e<14?"last week":Math.floor(e/7)>99?">99 weeks ago":"".concat(Math.floor(e/7)," weeks ago")}var yt=Object(n.forwardRef)((function(e,t){var a=e.id,n=e.title,c=e.days_since,i=e.frequency,o=e.color,l=e.last_event_type,s=e.todays_event,u=e.performEvent,m=r.a.createElement("div",null,r.a.createElement(R,{icon:v.b,className:"mr-10",onClick:function(){return u(a,tt)},"aria-label":"Complete"}),r.a.createElement(R,{color:"white",icon:v.i,onClick:function(){return u(a,at)},"aria-label":"Skip"}));if(s)switch(s){case tt:m=r.a.createElement("p",{className:"todays-event"},r.a.createElement(C.a,{className:"mr-10",icon:v.b}),"Completed");break;case at:m=r.a.createElement("p",{className:"todays-event"},r.a.createElement(C.a,{className:"mr-10",icon:v.i}),"Skipped")}return i?r.a.createElement("div",{className:"item activity-item",ref:t},r.a.createElement(et,{days_since:c,frequency:i,color:o}),r.a.createElement("div",null,r.a.createElement("div",{className:"mb-10"},r.a.createElement("h4",{className:"mb-0"},r.a.createElement(f.b,{to:"/days-since/".concat(a)},n)),r.a.createElement("p",null,rt(i)," \u2022 ",pt(l)," ",bt(c))),m)):r.a.createElement("div",{className:"item activity-item",ref:t},r.a.createElement("div",null,r.a.createElement("div",{className:"mb-10"},r.a.createElement("h4",{className:"mb-0"},r.a.createElement(f.b,{to:"/days-since/".concat(a)},n)),r.a.createElement("p",null,pt(l)," ",bt(c))),m))})),gt={performEvent:function(e,t){return function(a,n){return a(te("activityevents",K,Z.CREATE)),F.a.post("".concat(H,"/activities/").concat(e,"/events/"),{event_type:t},ne(n)).then((function(n){a(te("activityevents",$,Z.CREATE,n.data)),a(te("activities",$,Z.UPDATE,{id:e,days_since:0,last_event_type:t,todays_event:t}))})).catch((function(e){re(e,a,"Unable to perform event."),a(te("activityevents",J,Z.CREATE,e))}))}}},Ot=Object(o.b)((function(){return{}}),gt,null,{forwardRef:!0})(yt),jt=a(58),Ct=a.n(jt),St=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state=Object(x.a)({},W,!1),n.handleVisibilityChange=function(e){n.setState(Object(x.a)({},W,e))},n.openCreateModal=function(){n.setState(Object(x.a)({},W,!0)),n.activityFormRef.reset()},n.handleCreateActivity=function(e){n.setState(Object(x.a)({},W,!1)),n.props.createActivity(e)},n.mapActivitiesToActivityItems=function(e){return e.map((function(e){var t=e.id,a=e.title,c=e.frequency,i=e.days_since,o=e.color,l=e.last_event_type,s=e.todays_event;return r.a.createElement(Ot,{activity:e,key:t,id:t,title:a,frequency:c,days_since:i,color:n.props.colors.find((function(e){return e.id===o})).hex_code,last_event_type:l,todays_event:s})}))},e.listActivities(),e.listColors(),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.activities,n=t.activitiesLoading,c=t.activitiesError,i=t.colors,o=t.colorsLoading,l=t.colorsError;if(n||o)return r.a.createElement("div",null,r.a.createElement("h2",null,"Activities"),r.a.createElement(L,null));if(!a||c||!i||l)return r.a.createElement(E.a,{to:"/"});var s=a.reduce((function(e,t){return e[null!==t.frequency&&void 0!==t.frequency].push(t),e}),{true:[],false:[]});return s.true.sort((function(e,t){return e.frequency-e.days_since-(t.frequency-t.days_since)})),s.false.sort((function(e,t){return e.days_since-t.days_since})),r.a.createElement("div",null,r.a.createElement("h2",null,"Activities"),r.a.createElement("div",{className:"mb-20"},r.a.createElement(R,{icon:v.n,color:"blue",onClick:this.openCreateModal},"Create Activity")),0!==s.true.length&&r.a.createElement("div",null,r.a.createElement("h3",null,"With Frequency"),r.a.createElement(_e.a,{className:"item-list"},this.mapActivitiesToActivityItems(s.true))),0!==s.false.length&&r.a.createElement("div",null,r.a.createElement("h3",null,"Without Frequency"),r.a.createElement(_e.a,{className:"item-list"},this.mapActivitiesToActivityItems(s.false))),0===a.length&&r.a.createElement("div",{className:"grid mt-40"},r.a.createElement("div",{className:"center-wide"},r.a.createElement("img",{className:"mb-20",src:Ct.a,alt:"Empty street"}),r.a.createElement("h3",null,"No Activities"))),r.a.createElement(qe,{title:"Create Activity",isVisible:this.state[W],onVisibilityChange:this.handleVisibilityChange},r.a.createElement(Ze,{onSubmit:this.handleCreateActivity,ref:function(t){return e.activityFormRef=t}})))}}]),a}(n.Component),Tt={createActivity:function(e){var t=e.title,a=e.description,n=e.frequency,r=e.color;return function(e,c){return e(te("activities",K,Z.CREATE)),F.a.post("".concat(H,"/").concat("activities","/"),{title:t,description:a,frequency:n,color:r},ne(c)).then((function(t){e(te("activities",$,Z.CREATE,Object(h.a)(Object(h.a)({},t.data),{},{days_since:0})))})).catch((function(t){re(t,e,"Unable to create activity."),e(te("activities",J,Z.CREATE,t))}))}},listActivities:function(){return function(e,t){return e(te("activities",K,Z.LIST)),F.a.get("".concat(H,"/").concat("activities","/"),ne(t)).then((function(t){e(te("activities",$,Z.LIST,t.data))})).catch((function(t){re(t,e,"Unable to fetch activities."),e(te("activities",J,Z.LIST,t))}))}},listColors:Qe},Rt=Object(o.b)((function(e){return{activities:lt(e),activitiesLoading:it(e),activitiesError:ot(e),colors:Be(e),colorsLoading:He(e),colorsError:We(e)}}),Tt)(St);var kt=a(18),Nt=a.n(kt),Dt=a(59),Lt=a.n(Dt);a(111),a(112);function It(e){var t=e.onChange,a=e.placeholder,n=e.required,c=Object(j.a)(e,["onChange","placeholder","required"]);return r.a.createElement("div",{className:"date-picker"},r.a.createElement(Lt.a,Object.assign({formatDate:function(e,t){return Nt()(e).format(t)},parseDate:function(e,t){return Nt()(e,t).toDate()},format:"D MMMM YYYY",placeholder:a||"",onDayChange:t,inputProps:{required:n,onKeyDown:function(e){e.preventDefault()}}},c)),r.a.createElement(C.a,{icon:v.a,className:"calendar-icon"}))}var At=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={event_type:"",date:"",description:""},e.reset=function(t){if(t){var a=t.event_type,n=t.date,r=t.description;e.setState({event_type:a,date:Nt()(n,"YYYY-MM-DD").toDate(),description:r})}else e.setState({event_type:tt,date:null,description:""})},e.handleChange=function(t){e.setState(Object(x.a)({},t.target.name,t.target.value))},e.handleEventTypeChange=function(t){e.setState({event_type:t})},e.handleDateChange=function(t){e.setState({date:t})},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.event_type,r=a.date,c=a.description;e.props.onSubmit({event_type:n,date:Nt()(r).format("YYYY-MM-DD"),description:c})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.disabledDates,t=this.state,a=t.event_type,n=t.date,c=t.description;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"event_type"},"Event Type"),r.a.createElement(je,{id:"event_type",onChange:this.handleEventTypeChange,value:a,options:nt,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement(It,{value:n,onChange:this.handleDateChange,required:!0,dayPickerProps:{disabledDays:e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",name:"description",onChange:this.handleChange,value:c})),r.a.createElement(R,{icon:v.k},"Submit"))}}]),a}(n.Component);function wt(e){var t=e.onSubmit;return r.a.createElement("div",{className:"btn-group btn-group"},r.a.createElement(R,{icon:v.v,color:"red",onClick:function(){return t(!0)}},"Confirm"),r.a.createElement(R,{color:"faded-grey",onClick:function(){return t(!1)}},"Cancel"))}var Ut=a(60),Mt=a.n(Ut),Vt=(a(113),a(120));a(114);function xt(e){return r.a.createElement(Vt.a,Object.assign({classNames:"fade-transition",timeout:300,unmountOnExit:!0},e))}var Pt=Object(n.forwardRef)((function(e,t){var a=e.event,n=a.event_type,c=a.date,i=a.description,o=e.event,l=e.isEditable,s=e.openEditModal,u=e.openDeleteModal,m=Nt()(c).format("D MMMM YYYY"),d="";switch(n){case tt:d=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"mr-10",icon:v.b}),"Completed");break;case at:d=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"mr-10",icon:v.i}),"Skipped");break;default:d=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"mr-10",icon:v.o}),"Unknown event")}return r.a.createElement("div",{className:"event-item",ref:t},r.a.createElement("div",{className:"mb-n10"},r.a.createElement("p",null,d," on ",m),r.a.createElement("p",{className:"small"},Xe(i))),r.a.createElement(xt,{in:l},r.a.createElement("div",{className:"btn-group mt-20"},r.a.createElement(R,{icon:v.h,color:"green",size:"sm",onClick:function(){return s(o)},"aria-label":"Edit"}),r.a.createElement(R,{icon:v.v,color:"red",size:"sm",onClick:function(){return u(o)},"aria-label":"Delete"}))))})),_t=X("ACTIVITYSTATS"),Ft={items:[],loading:!0,error:null};var qt=function(e){return function(t,a){return t(ee(_t.REQUEST)),F.a.get("".concat(H,"/activities/").concat(e,"/statistics/"),ne(a)).then((function(e){t(ee(_t.SUCCESS,e.data))})).catch((function(e){re(e,t,"Unable to fetch activity statistics."),t(ee(_t.FAILURE,e))}))}},zt=function(e){return!0===e.activityStatisticsReducer.loading},Yt=function(e){return e.activityStatisticsReducer.error},Qt=function(e){return e.activityStatisticsReducer.items},Ht=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;Object(s.a)(this,a),(r=t.call(this,e)).state=(n={modalEvent:null},Object(x.a)(n,W,!1),Object(x.a)(n,B,!1),Object(x.a)(n,G,!1),Object(x.a)(n,"isEditable",!1),n),r.handleVisibilityChange=function(e,t){r.setState(Object(x.a)({},e,t))},r.openModal=function(e,t){var a;r.setState((a={},Object(x.a)(a,e,!0),Object(x.a)(a,"modalEvent",t),a)),e===W?r.createFormRef.reset():e===B&&r.editFormRef.reset(t)},r.handleCreateEvent=function(e){var t=r.props,a=t.activityId,n=t.createActivityEvent,c=t.retrieveActivityStatistics;r.setState(Object(x.a)({},W,!1)),n(a,e).then((function(){return c(a)}))},r.handleEditEvent=function(e){var t=r.props,a=t.activityId,n=t.updateActivityEvent,c=t.retrieveActivityStatistics;r.setState(Object(x.a)({},B,!1)),n(a,Object(h.a)(Object(h.a)({},r.state.modalEvent),e)).then((function(){return c(a)}))},r.handleDeleteEvent=function(e){var t=r.props,a=t.activityId,n=t.deleteActivityEvent,c=t.retrieveActivityStatistics;r.setState(Object(x.a)({},G,!1)),e&&n(a,r.state.modalEvent.id).then((function(){return c(a)}))};var c=e.activityId;return e.listActivityEvents(c),r}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.activityEvents,n=t.activityEventsLoading,c=t.activityEventsError,i=this.state.modalEvent,o=this.state.isEditable;return n?r.a.createElement("div",null,r.a.createElement("h2",null,"Events"),r.a.createElement(L,null)):!a||c?r.a.createElement(E.a,{to:"/days-since"}):(a.sort((function(e,t){return Nt()(e.date,"YYYY-MM-DD").toDate()-Nt()(t.date,"YYYY-MM-DD").toDate()})).reverse(),r.a.createElement("div",null,r.a.createElement("h2",null,"Events"),r.a.createElement("div",{className:"btn-group mb-20"},r.a.createElement(R,{icon:v.n,color:"blue",onClick:function(){return e.openModal(W)}},"Create Event"),o?r.a.createElement(R,{className:"ml-auto mr-0",color:"faded-grey",onClick:function(){return e.setState({isEditable:!1})}},"Done"):r.a.createElement(R,{className:"ml-auto mr-0",color:"green",onClick:function(){return e.setState({isEditable:!0})}},"Edit")),0!==a.length?r.a.createElement(_e.a,{className:"box"},a.map((function(t){return r.a.createElement(Pt,{key:t.id,event:t,isEditable:o,openEditModal:function(t){return e.openModal(B,t)},openDeleteModal:function(t){return e.openModal(G,t)}})}))):r.a.createElement("div",{className:"center mt-40"},r.a.createElement("img",{className:"mb-20",src:Mt.a,alt:"Trees under the sun"}),r.a.createElement("h3",null,"No Events")),r.a.createElement(qe,{title:"Create Event",isVisible:this.state[W],onVisibilityChange:function(t){return e.handleVisibilityChange(W,t)}},r.a.createElement(At,{onSubmit:this.handleCreateEvent,ref:function(t){return e.createFormRef=t},disabledDates:a.map((function(e){return Nt()(e.date,"YYYY-MM-DD").toDate()}))})),r.a.createElement(qe,{title:"Edit Event",isVisible:this.state[B],onVisibilityChange:function(t){return e.handleVisibilityChange(B,t)}},r.a.createElement(At,{onSubmit:this.handleEditEvent,ref:function(t){return e.editFormRef=t},disabledDates:a.filter((function(e){return!i||e.id!==i.id})).map((function(e){return Nt()(e.date,"YYYY-MM-DD").toDate()}))})),r.a.createElement(qe,{title:"Delete Event",isVisible:this.state[G],onVisibilityChange:function(t){return e.handleVisibilityChange(G,t)}},r.a.createElement(wt,{onSubmit:this.handleDeleteEvent}))))}}]),a}(n.Component),Wt={createActivityEvent:function(e,t){var a=t.event_type,n=t.date,r=t.description;return function(t,c){return t(te("activityevents",K,Z.CREATE)),F.a.post("".concat(H,"/activities/").concat(e,"/events/"),{event_type:a,date:n,description:r},ne(c)).then((function(e){t(te("activityevents",$,Z.CREATE,e.data))})).catch((function(e){re(e,t,"Unable to create event."),t(te("activityevents",J,Z.CREATE,e))}))}},updateActivityEvent:function(e,t){var a=t.id,n=t.event_type,r=t.date,c=t.description;return function(t,i){return t(te("activityevents",K,Z.UPDATE,a)),F.a.patch("".concat(H,"/activities/").concat(e,"/events/").concat(a,"/"),{event_type:n,date:r,description:c},ne(i)).then((function(e){t(te("activityevents",$,Z.UPDATE,e.data))})).catch((function(e){re(e,t,"Unable to update event."),t(te("activityevents",J,Z.UPDATE,e))}))}},deleteActivityEvent:function(e,t){return function(a,n){return a(te("activityevents",K,Z.DELETE)),F.a.delete("".concat(H,"/activities/").concat(e,"/events/").concat(t,"/"),ne(n)).then((function(){a(te("activityevents",$,Z.DELETE,t))})).catch((function(e){re(e,a,"Unable to delete event."),a(te("activityevents",J,Z.DELETE,e))}))}},listActivityEvents:function(e){return function(t,a){return t(te("activityevents",K,Z.LIST)),F.a.get("".concat(H,"/activities/").concat(e,"/events/"),ne(a)).then((function(e){t(te("activityevents",$,Z.LIST,e.data))})).catch((function(e){re(e,t,"Unable to fetch events."),t(te("activityevents",J,Z.LIST,e))}))}},retrieveActivityStatistics:qt},Bt=Object(o.b)((function(e){return{activityEvents:ht(e),activityEventsLoading:ft(e),activityEventsError:vt(e)}}),Wt)(Ht);var Gt={retrieveActivityStatistics:qt},Kt=Object(o.b)((function(e){return{activityStatistics:Qt(e),activityStatisticsLoading:zt(e),activityStatisticsError:Yt(e)}}),Gt)((function(e){var t=e.className,a=e.activityId,c=e.activityStatistics,i=e.activityStatisticsLoading,o=e.activityStatisticsError,l=e.retrieveActivityStatistics;if(Object(n.useEffect)((function(){l(a)}),[l,a]),i||!c||o)return r.a.createElement("div",null,r.a.createElement("h2",null,"Statistics"),r.a.createElement(L,null));var s=c.average_frequency,u=c.total_count,m=c.completed_count,d=c.skipped_count;return r.a.createElement("div",{className:t},r.a.createElement("h2",null,"Statistics"),s&&r.a.createElement("p",null,"Average frequency (over last 10 events): Every ",s.toFixed(1)," days"),r.a.createElement("p",null,"Total: ",u," times",r.a.createElement("br",null),"Completed: ",m," times",r.a.createElement("br",null),"Skipped: ",d," times"))})),$t=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;Object(s.a)(this,a),(r=t.call(this,e)).state=(n={},Object(x.a)(n,B,!1),Object(x.a)(n,G,!1),n),r.handleVisibilityChange=function(e,t){r.setState(Object(x.a)({},e,t))},r.openModal=function(e){r.setState(Object(x.a)({},e,!0)),e===B&&r.activityFormRef.reset(r.props.activity)},r.handleEditActivity=function(e){r.setState(Object(x.a)({},B,!1)),r.props.updateActivity(Object(h.a)(Object(h.a)({},r.props.activity),e))},r.handleDeleteActivity=function(e){var t=r.props,a=t.activity,n=t.deleteActivity;r.setState(Object(x.a)({},G,!1)),e&&n(a.id)};var c=e.match.params.activityId;return e.retrieveActivity(c),r}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.activity,n=t.activityId,c=t.activityLoading,i=t.activityError,o=t.match.params;if(c||n!==o.activityId)return r.a.createElement(L,null);if(!a||i)return r.a.createElement(E.a,{to:"/days-since"});var l=a.title,s=a.description,u=a.frequency;return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Days Since | ".concat(l))),r.a.createElement(A,{breadcrumbs:[{title:"Home",to:"/"},{title:"Days Since",to:"/days-since"},{title:l}]}),r.a.createElement("div",{className:"side-by-side"},r.a.createElement("div",null,r.a.createElement("div",{className:"mb-30"},r.a.createElement("div",{className:"mb-20"},r.a.createElement("h1",null,l),s&&r.a.createElement("p",null,Xe(s)),u&&r.a.createElement("p",null,"Frequency: ",rt(u))),r.a.createElement("div",{className:"btn-group"},r.a.createElement(R,{icon:v.h,color:"green",onClick:function(){return e.openModal(B)}},"Edit"),r.a.createElement(R,{icon:v.v,color:"red",onClick:function(){return e.openModal(G)}},"Delete"))),r.a.createElement(Kt,{activityId:n})),r.a.createElement(Bt,{activityId:n})),r.a.createElement(qe,{title:"Edit Activity",isVisible:this.state[B],onVisibilityChange:function(t){return e.handleVisibilityChange(B,t)}},r.a.createElement(Ze,{onSubmit:this.handleEditActivity,ref:function(t){return e.activityFormRef=t}})),r.a.createElement(qe,{title:"Delete Activity",isVisible:this.state[G],onVisibilityChange:function(t){return e.handleVisibilityChange(G,t)}},r.a.createElement(wt,{onSubmit:this.handleDeleteActivity})))}}]),a}(n.Component),Jt={retrieveActivity:function(e){return function(t,a){return t(te("activities",K,Z.RETRIEVE,e)),F.a.get("".concat(H,"/").concat("activities","/").concat(e,"/"),ne(a)).then((function(e){t(te("activities",$,Z.RETRIEVE,e.data))})).catch((function(e){re(e,t,"Unable to fetch activity."),t(te("activities",J,Z.RETRIEVE,e))}))}},updateActivity:function(e){var t=e.id,a=e.title,n=e.description,r=e.frequency,c=e.color;return function(e,i){return e(te("activities",K,Z.UPDATE,t)),F.a.patch("".concat(H,"/").concat("activities","/").concat(t,"/"),{title:a,description:n,frequency:r,color:c},ne(i)).then((function(t){e(te("activities",$,Z.UPDATE,t.data))})).catch((function(t){re(t,e,"Unable to update activity."),e(te("activities",J,Z.UPDATE,t))}))}},deleteActivity:function(e){return function(t,a){return t(te("activities",K,Z.DELETE)),F.a.delete("".concat(H,"/").concat("activities","/").concat(e,"/"),ne(a)).then((function(){t(te("activities",$,Z.DELETE,e))})).catch((function(e){re(e,t,"Unable to delete activity."),t(te("activities",J,Z.DELETE,e))}))}}},Zt=[{path:"/days-since",exact:!0,component:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Days Since")),r.a.createElement(A,{breadcrumbs:[{title:"Home",to:"/"},{title:"Days Since"}]}),r.a.createElement("h1",null,"Days Since"),r.a.createElement(Rt,null))}},{path:"/days-since/:activityId",exact:!0,component:Object(o.b)((function(e){return{activity:mt(e),activityId:dt(e),activityLoading:st(e),activityError:ut(e)}}),Jt)($t)}],Xt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:""},e.reset=function(t){if(t){var a=t.title;e.setState({title:a})}else e.setState({title:""})},e.handleChange=function(t){e.setState(Object(x.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.title;e.props.onSubmit({title:a})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.title;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",name:"title",type:"text",maxLength:"200",onChange:this.handleChange,value:e,required:!0})),r.a.createElement(R,{icon:v.k},"Submit"))}}]),a}(n.Component),ea=Object(n.forwardRef)((function(e,t){var a=e.cycle,n=a.id,c=a.title,i=a.total_duration,o=e.cycle,l=e.openEditModal,s=e.openDeleteModal;return r.a.createElement("div",{className:"item",ref:t},r.a.createElement("div",{className:"mb-10"},r.a.createElement("h3",{className:"mb-0"},r.a.createElement(f.b,{to:"/time-cycles/".concat(n)},c)),r.a.createElement("p",null,i)),r.a.createElement("div",{className:"btn-group"},r.a.createElement(R,{icon:v.h,color:"green",size:"sm",onClick:function(){return l(o)},"aria-label":"Edit"}),r.a.createElement(R,{icon:v.v,color:"red",size:"sm",onClick:function(){return s(o)},"aria-label":"Delete"})))})),ta=ae("cycles"),aa=function(e){return!0===e.cyclesReducer.loading[Z.LIST]},na=function(e){return e.cyclesReducer.error[Z.LIST]},ra=function(e){return e.cyclesReducer.items},ca=function(e){return!0===e.cyclesReducer.loading[Z.RETRIEVE]},ia=function(e){return e.cyclesReducer.error[Z.RETRIEVE]},oa=function(e){return e.cyclesReducer.item},la=function(e){return e.cyclesReducer.itemId},sa=a(61),ua=a.n(sa),ma=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;return Object(s.a)(this,a),(r=t.call(this,e)).state=(n={modalCycle:null},Object(x.a)(n,W,!1),Object(x.a)(n,B,!1),Object(x.a)(n,G,!1),n),r.handleVisibilityChange=function(e,t){r.setState(Object(x.a)({},e,t))},r.openModal=function(e,t){var a;r.setState((a={},Object(x.a)(a,e,!0),Object(x.a)(a,"modalCycle",t),a)),e===W?r.createFormRef.reset():e===B&&r.editFormRef.reset(t)},r.handleCreateCycle=function(e){var t=r.props.createCycle;r.setState(Object(x.a)({},W,!1)),t(e)},r.handleEditCycle=function(e){var t=r.props.updateCycle;r.setState(Object(x.a)({},B,!1)),t(Object(h.a)(Object(h.a)({},r.state.modalCycle),e))},r.handleDeleteCycle=function(e){var t=r.props.deleteCycle;r.setState(Object(x.a)({},G,!1)),e&&t(r.state.modalCycle.id)},e.listCycles(),r}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.cycles,n=t.cyclesLoading,c=t.cyclesError;return n?r.a.createElement("div",null,r.a.createElement("h2",null,"Cycles"),r.a.createElement(L,null)):!a||c?r.a.createElement(E.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("h2",null,"Cycles"),r.a.createElement("div",{className:"mb-20"},r.a.createElement(R,{icon:v.n,color:"blue",onClick:function(){return e.openModal(W)}},"Create Cycle")),0!==a.length?r.a.createElement(_e.a,{className:"item-list"},a.map((function(t){return r.a.createElement(ea,{key:t.id,cycle:t,openEditModal:function(t){return e.openModal(B,t)},openDeleteModal:function(t){return e.openModal(G,t)}})}))):r.a.createElement("div",{className:"grid mt-40"},r.a.createElement("div",{className:"center-wide"},r.a.createElement("img",{className:"mb-20",src:ua.a,alt:"Empty street"}),r.a.createElement("h3",null,"No Cycles"))),r.a.createElement(qe,{title:"Create Cycle",isVisible:this.state[W],onVisibilityChange:function(t){return e.handleVisibilityChange(W,t)}},r.a.createElement(Xt,{onSubmit:this.handleCreateCycle,ref:function(t){return e.createFormRef=t}})),r.a.createElement(qe,{title:"Edit Cycle",isVisible:this.state[B],onVisibilityChange:function(t){return e.handleVisibilityChange(B,t)}},r.a.createElement(Xt,{onSubmit:this.handleEditCycle,ref:function(t){return e.editFormRef=t}})),r.a.createElement(qe,{title:"Delete Cycle",isVisible:this.state[G],onVisibilityChange:function(t){return e.handleVisibilityChange(G,t)}},r.a.createElement(wt,{onSubmit:this.handleDeleteCycle})))}}]),a}(n.Component),da={createCycle:function(e){var t=e.title;return function(e,a){return e(te("cycles",K,Z.CREATE)),F.a.post("".concat(H,"/").concat("cycles","/"),{title:t},ne(a)).then((function(t){e(te("cycles",$,Z.CREATE,Object(h.a)(Object(h.a)({},t.data),{},{total_duration:"00:00:00"})))})).catch((function(t){re(t,e,"Unable to create cycle."),e(te("cycles",J,Z.CREATE,t))}))}},updateCycle:function(e){var t=e.id,a=e.title;return function(e,n){return e(te("cycles",K,Z.UPDATE,t)),F.a.patch("".concat(H,"/").concat("cycles","/").concat(t,"/"),{title:a},ne(n)).then((function(t){e(te("cycles",$,Z.UPDATE,t.data))})).catch((function(t){re(t,e,"Unable to update cycle."),e(te("cycles",J,Z.UPDATE,t))}))}},deleteCycle:function(e){return function(t,a){return t(te("cycles",K,Z.DELETE)),F.a.delete("".concat(H,"/").concat("cycles","/").concat(e,"/"),ne(a)).then((function(){t(te("cycles",$,Z.DELETE,e))})).catch((function(e){re(e,t,"Unable to delete cycle."),t(te("cycles",J,Z.DELETE,e))}))}},listCycles:function(){return function(e,t){return e(te("cycles",K,Z.LIST)),F.a.get("".concat(H,"/").concat("cycles","/"),ne(t)).then((function(t){e(te("cycles",$,Z.LIST,t.data))})).catch((function(t){re(t,e,"Unable to fetch cycles."),e(te("cycles",J,Z.LIST,t))}))}}},Ea=Object(o.b)((function(e){return{cycles:ra(e),cyclesLoading:aa(e),cyclesError:na(e)}}),da)(ma);var fa=ae("timers"),va=function(e){return!0===e.timersReducer.loading[Z.LIST]},ha=function(e){return e.timersReducer.error[Z.LIST]},pa=function(e){return e.timersReducer.items},ba=function(e){return Nt.a.duration(e).asSeconds()},ya=function(e){return[Math.floor(e/60),Math.floor(e%60)].map((function(e){return e<10?"0"+e:e})).join(":")},ga=function(e){return ya(ba(e))},Oa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",duration:"",color:void 0},e.reset=function(t){if(t){var a=t.title,n=t.duration,r=t.color;e.setState({title:a,duration:ga(n),color:r})}else e.setState({title:"",duration:"",color:void 0})},e.handleChange=function(t){e.setState(Object(x.a)({},t.target.name,t.target.value))},e.handleColorChange=function(t){e.setState({color:t})},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.title,r=a.duration,c=a.color;e.props.onSubmit({title:n,duration:r,color:c})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.duration,n=e.color;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",name:"title",type:"text",maxLength:"200",onChange:this.handleChange,value:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"duration"},"Duration"),r.a.createElement("p",{className:"small"},"Format: mm:ss, ss"),r.a.createElement("input",{id:"duration",name:"duration",type:"text",maxLength:"200",onChange:this.handleChange,value:a,pattern:"^\\d+(:\\d+)?$",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"color"},"Color"),r.a.createElement(Je,{name:"color",onChange:this.handleColorChange,value:n,required:!0})),r.a.createElement(R,{icon:v.k},"Submit"))}}]),a}(n.Component),ja=(a(115),Object(n.forwardRef)((function(e,t){var a=e.timer,n=a.title,c=a.duration,i=a.color,o=e.colors,l=e.isEditable,s=e.isCurrentTimer,u=e.openEditModal,m=e.openDeleteModal,d=e.moveUpTimer,E=e.moveDownTimer;return r.a.createElement("div",{className:"timer-item".concat(s?" current-timer-item":""),ref:t},r.a.createElement("div",{className:"item"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",{className:"mb-0"},n),r.a.createElement("p",{className:"mb-0"},ga(c))),r.a.createElement(xt,{in:l},r.a.createElement("div",{className:"btn-group mt-10"},r.a.createElement(R,{icon:v.h,color:"green",size:"sm",onClick:u,"aria-label":"Edit"}),r.a.createElement(R,{icon:v.v,color:"red",size:"sm",onClick:m,"aria-label":"Delete"})))),r.a.createElement(xt,{in:l},r.a.createElement("div",{className:"btn-group btn-group-vertical"},d&&r.a.createElement(R,{icon:v.f,color:"white",size:"sm",onClick:d,"aria-label":"Move up"}),E&&r.a.createElement(R,{icon:v.c,color:"white",size:"sm",onClick:E,"aria-label":"Move down"})))),r.a.createElement("div",{className:"timer-colour",style:{backgroundColor:o.find((function(e){return e.id===i})).hex_code}}))}))),Ca=a(62),Sa=a.n(Ca),Ta=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e,n;Object(s.a)(this,a);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(n=t.call.apply(t,[this].concat(c))).state=(e={modalTimer:null},Object(x.a)(e,W,!1),Object(x.a)(e,B,!1),Object(x.a)(e,G,!1),e),n.handleVisibilityChange=function(e,t){n.setState(Object(x.a)({},e,t))},n.openModal=function(e,t){var a;n.setState((a={},Object(x.a)(a,e,!0),Object(x.a)(a,"modalTimer",t),a)),e===W?n.createFormRef.reset():e===B&&n.editFormRef.reset(t)},n.handleCreateTimer=function(e){var t=n.props,a=t.cycleId,r=t.createTimer;n.setState(Object(x.a)({},W,!1)),r(a,e)},n.handleEditTimer=function(e){var t=n.props,a=t.cycleId,r=t.updateTimer;n.setState(Object(x.a)({},B,!1)),r(a,Object(h.a)(Object(h.a)({},n.state.modalTimer),e))},n.handleDeleteTimer=function(e){var t=n.props,a=t.cycleId,r=t.deleteTimer;n.setState(Object(x.a)({},G,!1)),e&&r(a,n.state.modalTimer.id)},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentTimer,n=t.cycleId,c=t.timers,i=t.colors,o=t.moveUpTimer,l=t.moveDownTimer,s=t.isEditable,u=t.setEditable,m=a?a.id:null,d=c.map((function(t,a){return r.a.createElement(ja,{key:t.id,timer:t,openEditModal:function(){return e.openModal(B,t)},openDeleteModal:function(){return e.openModal(G,t)},isEditable:s&&t.id!==m,moveUpTimer:0!==a?function(){return o(n,t.id)}:null,moveDownTimer:a!==c.length-1?function(){return l(n,t.id)}:null,colors:i,isCurrentTimer:t.id===m})}));d.push(r.a.createElement("hr",{key:"divider",className:"my-30"}));var E=c.findIndex((function(e){return e.id===m}));return-1!==E&&(d=d.slice(E).concat(d.slice(0,E))),r.a.createElement("div",null,r.a.createElement("h2",null,"Timers"),r.a.createElement("div",{className:"btn-group mb-20"},r.a.createElement(xt,{in:s},r.a.createElement(R,{icon:v.n,color:"blue",onClick:function(){return e.openModal(W)}},"Create Timer")),s?r.a.createElement(R,{key:"edit-btn",className:"ml-auto mr-0",color:"faded-grey",onClick:function(){return u(!1)}},"Done"):r.a.createElement(R,{key:"edit-btn",className:"ml-auto mr-0",color:"green",onClick:function(){return u(!0)}},"Edit")),0!==c.length?r.a.createElement(_e.a,{duration:200,easing:"ease-out"},d):r.a.createElement("div",{className:"grid mt-40"},r.a.createElement("div",{className:"center-wide"},r.a.createElement("img",{className:"mb-20",src:Sa.a,alt:"Empty street"}),r.a.createElement("h3",null,"No Timers"))),r.a.createElement(qe,{title:"Create Timer",isVisible:this.state[W],onVisibilityChange:function(t){return e.handleVisibilityChange(W,t)}},r.a.createElement(Oa,{onSubmit:this.handleCreateTimer,ref:function(t){return e.createFormRef=t}})),r.a.createElement(qe,{title:"Edit Timer",isVisible:this.state[B],onVisibilityChange:function(t){return e.handleVisibilityChange(B,t)}},r.a.createElement(Oa,{onSubmit:this.handleEditTimer,ref:function(t){return e.editFormRef=t}})),r.a.createElement(qe,{title:"Delete Timer",isVisible:this.state[G],onVisibilityChange:function(t){return e.handleVisibilityChange(G,t)}},r.a.createElement(wt,{onSubmit:this.handleDeleteTimer})))}}]),a}(n.Component),Ra={createTimer:function(e,t){var a=t.title,n=t.duration,r=t.color;return function(t,c){return t(te("timers",K,Z.CREATE)),F.a.post("".concat(H,"/cycles/").concat(e,"/").concat("timers","/"),{title:a,duration:n,color:r},ne(c)).then((function(e){t(te("timers",$,Z.CREATE,e.data))})).catch((function(e){re(e,t,"Unable to create timer."),t(te("timers",J,Z.CREATE,e))}))}},updateTimer:function(e,t){var a=t.id,n=t.title,r=t.duration,c=t.color;return function(t,i){return t(te("timers",K,Z.UPDATE,a)),F.a.patch("".concat(H,"/cycles/").concat(e,"/").concat("timers","/").concat(a,"/"),{title:n,duration:r,color:c},ne(i)).then((function(e){t(te("timers",$,Z.UPDATE,e.data))})).catch((function(e){re(e,t,"Unable to update timer."),t(te("timers",J,Z.UPDATE,e))}))}},deleteTimer:function(e,t){return function(a,n){return a(te("timers",K,Z.DELETE)),F.a.delete("".concat(H,"/cycles/").concat(e,"/").concat("timers","/").concat(t,"/"),ne(n)).then((function(){a(te("timers",$,Z.DELETE,t))})).catch((function(e){re(e,a,"Unable to delete timer."),a(te("timers",J,Z.DELETE,e))}))}},moveUpTimer:function(e,t){return function(a,n){return F.a.post("".concat(H,"/cycles/").concat(e,"/timers/").concat(t,"/move-up/"),{},ne(n)).then((function(e){a(te("timers",$,Z.LIST,e.data))})).catch((function(e){re(e,a,"Unable to move up timer."),a(te("timers",J,Z.LIST,e))}))}},moveDownTimer:function(e,t){return function(a,n){return F.a.post("".concat(H,"/cycles/").concat(e,"/timers/").concat(t,"/move-down/"),{},ne(n)).then((function(e){a(te("timers",$,Z.LIST,e.data))})).catch((function(e){re(e,a,"Unable to move down timer."),a(te("timers",J,Z.LIST,e))}))}}},ka=Object(o.b)((function(){return{}}),Ra)(Ta),Na=(a(116),a(63)),Da=a.n(Na),La=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={nonce:0,timerEvents:[],autoPlay:!0,sound:!0},e.getSecondsLeft=function(){for(var t=e.state.timerEvents,a=0,n=0;n<t.length;n+=2){var r=void 0,c=void 0;n+1<t.length?(r=t[n],c=t[n+1]):(r=t[n],c=new Date),a+=c-r}return Math.max(e.getCurrentDuration()-a/1e3,0)},e.getTimeDisplay=function(){var t=Math.max(Math.round(e.getSecondsLeft()),0);return ya(t)},e.isPaused=function(){return e.state.timerEvents.length%2===0},e.getCurrentDuration=function(){var t=e.props.currentTimer;return t?ba(t.duration):0},e.tick=function(){e.getSecondsLeft()>0?e.setState({nonce:e.state.nonce+1}):(e.pause(),e.state.sound&&new Audio(Da.a).play(),e.state.autoPlay&&e.changeTimer()),e.updateCanvas()},e.changeTimer=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?e.props.getNextTimer():e.props.getPreviousTimer();if(n){var r=ba(n.duration);a?(clearInterval(e.interval),e.interval=setInterval(e.tick,Math.min(r,250)),e.setState({nonce:0,timerEvents:[new Date]})):(clearInterval(e.interval),e.setState({nonce:0,timerEvents:[]}),e.updateCanvas(n))}},e.play=function(){if(e.isPaused())if(e.getSecondsLeft()<=0)e.changeTimer();else{var t=e.getCurrentDuration();clearInterval(e.interval),e.interval=setInterval(e.tick,Math.min(t,250)),e.setState({timerEvents:[].concat(Object(l.a)(e.state.timerEvents),[new Date])})}},e.pause=function(){e.isPaused()||(clearInterval(e.interval),e.setState({timerEvents:[].concat(Object(l.a)(e.state.timerEvents),[new Date])}))},e.stop=function(){e.setState({nonce:0,timerEvents:[]}),clearInterval(e.interval),e.props.clearCurrentTimer()},e.updateCanvas=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=e.props,n=a.currentTimer,r=a.colors,c=t||n;if(c){var i=e.canvasRef;if(i){var o=i.getContext("2d"),l=i.width,s=i.height,u=l/2,m=s/2,d=t?1:e.getSecondsLeft()/e.getCurrentDuration(),E=r.find((function(e){return e.id===c.color}));o.globalCompositeOperation="destination-over",o.clearRect(0,0,l,s),o.save(),o.fillStyle=E?E.hex_code:null,o.beginPath(),o.moveTo(u,m),o.arc(u,m,l/2,-Math.PI/2,-Math.PI/2+2*d*Math.PI),o.lineTo(u,m),o.closePath(),o.fill(),o.restore()}}},e}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentTimer,n=t.isDisabled,c=this.state,i=c.autoPlay,o=c.sound;return r.a.createElement("div",{className:"timer-display"},r.a.createElement("div",{className:"progress-circle"},r.a.createElement("canvas",{className:"outer-circle",ref:function(t){return e.canvasRef=t},height:"600px",width:"600px",style:{display:a?"block":"none"}}),r.a.createElement("div",{className:"inner-circle"},r.a.createElement("p",null,this.getTimeDisplay()))),!n&&r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("h3",null,a.title),r.a.createElement("div",{className:"btn-group"},r.a.createElement(R,{icon:v.r,color:"faded-grey",onClick:function(){return e.changeTimer(!1,!1)},"aria-label":"Previous timer"}),this.isPaused()?r.a.createElement(R,{icon:v.m,color:"faded-grey",onClick:this.play,"aria-label":"Play"}):r.a.createElement(R,{icon:v.l,color:"faded-grey",onClick:this.pause,"aria-label":"Pause"}),r.a.createElement(R,{icon:v.t,color:"faded-grey",onClick:this.stop,"aria-label":"Stop"}),r.a.createElement(R,{icon:v.s,color:"faded-grey",onClick:function(){return e.changeTimer(!0,!1)},"aria-label":"Next timer"})),r.a.createElement("div",{className:"btn-group"},r.a.createElement(R,{icon:i?v.j:v.w,color:i?"dark-grey":"faded-grey",onClick:function(){return e.setState({autoPlay:!i})}},"Auto-play: ",i?"On":"Off"),r.a.createElement(R,{icon:o?v.z:v.y,color:o?"dark-grey":"faded-grey",onClick:function(){return e.setState({sound:!o})}},"Sound: ",o?"On":"Off"))))}}]),a}(n.Component),Ia=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).state={isEditable:!1,currentTimer:null},n.getTimer=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.props,a=t.timers,r=t.timersLoading,c=t.timersError,i=t.colors,o=t.colorsLoading,l=t.colorsError,s=n.state.currentTimer,u=null;if(a&&!r&&!c&&i&&!o&&!l&&0!==a.length)if(null===s)u=e?a[0]:a[a.length-1];else{var m=a.findIndex((function(e){return e.id===s.id}));u=e?a[(m+1)%a.length]:a[(m+a.length-1)%a.length]}return n.setState({currentTimer:u}),u};var r=e.match.params.cycleId;return e.retrieveCycle(r),e.listTimers(r),e.listColors(),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.cycle,n=t.cycleId,c=t.cycleLoading,i=t.cycleError,o=t.timers,l=t.timersLoading,s=t.timersError,u=t.colors,m=t.colorsLoading,d=t.colorsError,f=t.match.params,v=this.state,h=v.isEditable,p=v.currentTimer;if(c||n!==f.cycleId||l||m)return r.a.createElement(L,null);if(!a||i||!o||s||!u||d)return r.a.createElement(E.a,{to:"/time-cycles"});var b=a.title;return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Time Cycles | ".concat(b))),r.a.createElement(A,{breadcrumbs:[{title:"Home",to:"/"},{title:"Time Cycles",to:"/time-cycles"},{title:b}]}),r.a.createElement("div",{className:"side-by-side"},r.a.createElement("div",null,r.a.createElement("h1",null,b),r.a.createElement(La,{currentTimer:p,colors:u,clearCurrentTimer:function(){return e.setState({currentTimer:null})},getPreviousTimer:function(){return e.getTimer(!1)},getNextTimer:function(){return e.getTimer(!0)},isDisabled:0===o.length})),r.a.createElement(ka,{timers:o,colors:u,cycleId:n,isEditable:h,setEditable:function(t){return e.setState({isEditable:t})},currentTimer:p})))}}]),a}(n.Component),Aa={retrieveCycle:function(e){return function(t,a){return t(te("cycles",K,Z.RETRIEVE,e)),F.a.get("".concat(H,"/").concat("cycles","/").concat(e,"/"),ne(a)).then((function(e){t(te("cycles",$,Z.RETRIEVE,e.data))})).catch((function(e){re(e,t,"Unable to fetch cycle."),t(te("cycles",J,Z.RETRIEVE,e))}))}},listTimers:function(e){return function(t,a){return t(te("timers",K,Z.LIST)),F.a.get("".concat(H,"/cycles/").concat(e,"/").concat("timers","/"),ne(a)).then((function(e){t(te("timers",$,Z.LIST,e.data))})).catch((function(e){re(e,t,"Unable to fetch timers."),t(te("timers",J,Z.LIST,e))}))}},listColors:Qe},wa=[{path:"/time-cycles",exact:!0,component:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,null,r.a.createElement("title",null,"Time Cycles")),r.a.createElement(A,{breadcrumbs:[{title:"Home",to:"/"},{title:"Time Cycles"}]}),r.a.createElement("h1",null,"Time Cycles"),r.a.createElement(Ea,null))}},{path:"/time-cycles/:cycleId",exact:!0,component:Object(o.b)((function(e){return{cycle:oa(e),cycleId:la(e),cycleLoading:ca(e),cycleError:ia(e),timers:pa(e),timersLoading:va(e),timersError:ha(e),colors:Be(e),colorsLoading:He(e),colorsError:We(e)}}),Aa)(Ia)}],Ua=function(e){var t=new URLSearchParams(e.location.search).get("next");return r.a.createElement(E.a,{to:"/".concat(t||"")})},Ma=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.refreshToken,a=e.refreshTokenLogin;t&&a()}},{key:"render",value:function(){var e=this.props,t=e.loginLoading,a=e.loginError,n=e.refreshToken,c=e.accessToken;if(n&&!c||t)return r.a.createElement(L,null);if(!c||a)return r.a.createElement(f.a,null,r.a.createElement(D,null),r.a.createElement(E.d,null,xe.map((function(e,t){return r.a.createElement(E.b,Object.assign({key:t},e))})),r.a.createElement(E.a,{from:"/:next",exact:!0,to:"/login?next=:next"}),r.a.createElement(E.a,{from:"/",exact:!0,to:"/login"})));var i=[].concat(Object(l.a)(Pe),Object(l.a)(Zt),Object(l.a)(wa));return r.a.createElement(f.a,null,r.a.createElement(D,null),r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/",exact:!0,component:w}),i.map((function(e,t){return r.a.createElement(E.b,Object.assign({key:t},e))})),r.a.createElement(E.b,{path:"/login",exact:!0,component:Ua}),xe.map((function(e,t){return r.a.createElement(E.a,{key:"auth-".concat(t),from:e.path,exact:!0,to:"/"})})),r.a.createElement(E.b,{path:"/not-found",exact:!0,component:V}),r.a.createElement(E.a,{from:"/",to:"/not-found"})))}}]),a}(n.Component),Va={refreshTokenLogin:function(){return function(e,t){e(ee(ce.REQUEST));var a=t().authReducer.refreshToken;return F.a.post("".concat(Q,"/jwt/refresh/"),{refresh:a}).then((function(t){e(ee(ce.SUCCESS,Object(h.a)(Object(h.a)({},t.data),{},{refresh:a})))})).catch((function(t){g("Unable to log in.")(e),e(ee(ce.FAILURE,t))}))}}},xa=Object(o.b)((function(e){return{loginLoading:me(e),loginError:de(e),refreshToken:se(e),accessToken:ue(e)}}),Va)(Ma),Pa=a(26),_a=a(64),Fa=Object(Pa.c)({errorsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_DISPLAY":return Object(h.a)(Object(h.a)({},e),{},{errors:[].concat(Object(l.a)(e.errors),[t.payload])});case"ERROR_CLOSE":return Object(h.a)(Object(h.a)({},e),{},{errors:e.errors.map((function(e){return e.id===t.payload?Object(h.a)(Object(h.a)({},e),{},{isVisible:!1}):e}))});case"ERROR_REMOVE":return Object(h.a)(Object(h.a)({},e),{},{errors:e.errors.filter((function(e){return e.id!==t.payload}))});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce.REQUEST:return Object(h.a)(Object(h.a)({},e),{},{loginLoading:!0,loginError:null});case ce.SUCCESS:var a=t.payload,n=a.access,r=a.refresh;return z.a.set("refreshToken",r),Object(h.a)(Object(h.a)({},e),{},{accessToken:n,refreshToken:r,loginLoading:!1});case ce.FAILURE:return z.a.remove("refreshToken"),Object(h.a)(Object(h.a)({},e),{},{accessToken:null,refreshToken:null,loginLoading:!1,loginError:t.payload});case ie.REQUEST:return Object(h.a)(Object(h.a)({},e),{},{signupLoading:!0,signupError:null});case ie.SUCCESS:return Object(h.a)(Object(h.a)({},e),{},{signupLoading:!1});case ie.FAILURE:return Object(h.a)(Object(h.a)({},e),{},{signupLoading:!1,signupError:t.payload});case"LOGOUT":return z.a.remove("refreshToken"),Object(h.a)(Object(h.a)({},e),{},{accessToken:null,refreshToken:null});default:return e}},colorsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze.REQUEST:return Object(h.a)(Object(h.a)({},e),{},{loading:!0,error:null});case ze.SUCCESS:return Object(h.a)(Object(h.a)({},e),{},{items:t.payload,loading:!1});case ze.FAILURE:return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:t.payload});default:return e}},timezonesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce.REQUEST:return Object(h.a)(Object(h.a)({},e),{},{loading:!0,error:null});case Ce.SUCCESS:return Object(h.a)(Object(h.a)({},e),{},{items:t.payload,loading:!1});case Ce.FAILURE:return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:t.payload});default:return e}},profileReducer:Ie,activitiesReducer:ct,activityEventsReducer:Et,activityStatisticsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t.REQUEST:return Object(h.a)(Object(h.a)({},e),{},{loading:!0,error:null});case _t.SUCCESS:return Object(h.a)(Object(h.a)({},e),{},{items:t.payload,loading:!1});case _t.FAILURE:return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:t.payload});default:return e}},cyclesReducer:ta,timersReducer:fa}),qa=[_a.a],za=Object(Pa.e)(Fa,{},Object(Pa.d)(Pa.a.apply(void 0,qa)));var Ya=function(){return r.a.createElement(o.a,{store:za},r.a.createElement(xa,null))};a(117);i.a.render(r.a.createElement(Ya,null),document.getElementById("app-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){e.exports=a.p+"static/media/not-found.b882863e.svg"},58:function(e,t,a){e.exports=a.p+"static/media/empty.afc6d931.svg"},60:function(e,t,a){e.exports=a.p+"static/media/empty.ca39146a.svg"},61:function(e,t,a){e.exports=a.p+"static/media/empty.afc6d931.svg"},62:function(e,t,a){e.exports=a.p+"static/media/empty.ca39146a.svg"},63:function(e,t,a){e.exports=a.p+"static/media/ding.d82fffe4.mp3"},67:function(e,t,a){e.exports=a(118)},76:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.879f03a0.chunk.js.map