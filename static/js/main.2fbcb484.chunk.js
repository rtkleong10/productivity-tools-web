(this["webpackJsonpproductivity-tools-web"]=this["webpackJsonpproductivity-tools-web"]||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),i=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(5),l=a(25),s=a(7),u=a(8),m=a(10),d=a(9),E=a(12),v=a(13);a(71);function f(){return r.a.createElement("div",{className:"loader"})}var p=a(4),h=a(14),b=a(22),y=a(17),g=(a(74),["dark-grey","medium-grey","faded-grey","white","blue","red","green","purple"]),O=["sm","md"];function j(e){var t=e.className,a=e.isLink,n=e.isRounded,c=e.size,i=e.color,o=e.icon,l=e.children,s=Object(b.a)(e,["className","isLink","isRounded","size","color","icon","children"]),u=["btn"];t&&u.push(t),n&&u.push("btn-rounded"),O.includes(c)&&"md"!==i&&u.push("btn-".concat(c)),g.includes(i)&&"dark-grey"!==i&&u.push("btn-".concat(i));var m=r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(y.a,{className:l?"mr-10":"",icon:o}),l);return a?r.a.createElement(v.b,Object.assign({className:u.join(" ")},s),m):r.a.createElement("button",Object.assign({className:u.join(" ")},s),m)}function C(e){var t=e.breadcrumbs,a=Object(b.a)(e,["breadcrumbs"]);return r.a.createElement("p",a,t.map((function(e,a){var c=e.title,i=(e.className,Object(b.a)(e,["title","className"]));return a<t.length-1?r.a.createElement(n.Fragment,{key:a},r.a.createElement(v.b,i,c),r.a.createElement(y.a,{icon:p.d,className:"mx-5"})):r.a.createElement("span",Object.assign({key:a},i),c)})))}function S(){return r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Productivity Tools")),r.a.createElement(C,{breadcrumbs:[{title:"Home"}]}),r.a.createElement("h1",null,"Welcome to Productivity Tools!"),r.a.createElement("div",{className:"mb-30 btn-group"},r.a.createElement(j,{isLink:!0,to:"/profile",icon:p.o},"Profile"),r.a.createElement(j,{isLink:!0,to:"/logout",color:"faded-grey",icon:p.l},"Log Out")),r.a.createElement("div",{className:"btn-group btn-group-vertical"},r.a.createElement(j,{isLink:!0,to:"/days-since",color:"blue",icon:p.e},"Days Since")))}var R=a(55),T=a.n(R);function k(){return r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Not Found")),r.a.createElement("div",{className:"center mt-40"},r.a.createElement("img",{src:T.a,alt:"Creatures hiding behind trees"}),r.a.createElement("div",{className:"mb-20"},r.a.createElement("h1",null,"404 Not Found"),r.a.createElement("p",null,"Sorry, we can't seem to find the page that you're looking for.")),r.a.createElement(j,{isLink:!0,to:"/",icon:p.c},"Return to Home")))}var N=a(3),L=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleChange=function(t){e.setState(Object(N.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.props.onSubmit({username:n,password:r})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{name:"username",id:"username",type:"text",onChange:this.handleChange,value:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{name:"password",id:"password",type:"password",onChange:this.handleChange,value:a,required:!0})),r.a.createElement(j,{icon:p.h},"Submit"))}}]),a}(n.Component),A=a(1),w=a(11),D=a.n(w),U=a(30),I=a.n(U),_="https://rtkleong10-productivity-tools.herokuapp.com",M="".concat(_,"/auth"),V="".concat(_,"/api"),q="createModalVisible",P="editModalVisible",x="deleteModalVisible",F={errors:[]};function z(e){return{type:"ERROR_CLOSE",payload:e}}function Y(e){return{type:"ERROR_REMOVE",payload:e}}var Q=function(e){return function(t){var a=Date.now().toString(36)+Math.random().toString(36).substr(2);t({type:"ERROR_DISPLAY",payload:{id:a,message:e,isVisible:!0}}),setTimeout((function(){return t(z(a))}),3e3),setTimeout((function(){return t(Y(a))}),5e3)}},H=function(e){return e.errorsReducer.errors},W="REQUEST",B="SUCCESS",G="FAILURE",K={CREATE:"CREATE",RETRIEVE:"RETRIEVE",UPDATE:"UPDATE",DELETE:"DELETE",LIST:"LIST"};function J(e){var t=e.toUpperCase();return{REQUEST:"".concat(t,"_").concat(W),SUCCESS:"".concat(t,"_").concat(B),FAILURE:"".concat(t,"_").concat(G)}}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:e,payload:t}}function Z(e,t,a,n){return{type:"".concat(e.toUpperCase(),"_").concat(t,"_").concat(a),payload:n}}function X(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",r={loading:(t={},Object(N.a)(t,K.CREATE,!0),Object(N.a)(t,K.RETRIEVE,!0),Object(N.a)(t,K.UPDATE,!0),Object(N.a)(t,K.DELETE,!0),Object(N.a)(t,K.LIST,!0),t),error:(a={},Object(N.a)(a,K.CREATE,null),Object(N.a)(a,K.RETRIEVE,null),Object(N.a)(a,K.UPDATE,null),Object(N.a)(a,K.DELETE,null),Object(N.a)(a,K.LIST,null),a),items:[],item:null,itemId:null};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0,c=/^(.+)_(.+)_(.+)$/,i=a.type.match(c);if(!i)return t;var o=i[1],s=i[2],u=i[3];if(o!==e.toUpperCase()||!Object.values(K).includes(u))return t;switch(s){case W:return Object(A.a)(Object(A.a)({},t),{},{loading:Object(A.a)(Object(A.a)({},t.loading),{},Object(N.a)({},u,!0)),error:Object(A.a)(Object(A.a)({},t.error),{},Object(N.a)({},u,null)),itemId:a.payload?a.payload:t.itemId});case B:switch(u){case K.CREATE:return Object(A.a)(Object(A.a)({},t),{},{loading:Object(A.a)(Object(A.a)({},t.loading),{},Object(N.a)({},u,!1)),items:[].concat(Object(l.a)(t.items),[a.payload])});case K.RETRIEVE:return Object(A.a)(Object(A.a)({},t),{},{loading:Object(A.a)(Object(A.a)({},t.loading),{},Object(N.a)({},u,!1)),item:a.payload});case K.UPDATE:return Object(A.a)(Object(A.a)({},t),{},{loading:Object(A.a)(Object(A.a)({},t.loading),{},Object(N.a)({},u,!1)),items:t.items.map((function(e){return e[n]===a.payload[n]?Object(A.a)(Object(A.a)({},e),a.payload):e})),item:a.payload});case K.DELETE:return Object(A.a)(Object(A.a)({},t),{},{loading:Object(A.a)(Object(A.a)({},t.loading),{},Object(N.a)({},u,!1)),error:Object(A.a)(Object(A.a)({},t.error),{},Object(N.a)({},K.RETRIEVE,t.item&&t.item[n]===a.payload?"Deleted":t.error[K.RETRIEVE])),items:t.items.filter((function(e){return e[n]!==a.payload}))});case K.LIST:return Object(A.a)(Object(A.a)({},t),{},{loading:Object(A.a)(Object(A.a)({},t.loading),{},Object(N.a)({},u,!1)),items:a.payload});default:return t}case G:return Object(A.a)(Object(A.a)({},t),{},{loading:Object(A.a)(Object(A.a)({},t.loading),{},Object(N.a)({},u,!1)),error:Object(A.a)(Object(A.a)({},t.error),{},Object(N.a)({},u,a.payload))});default:return t}}}var ee=function(e){return{headers:{Authorization:"Bearer "+e().authReducer.accessToken}}},te=function(e,t,a){e&&e.response&&401===e.response.status?Q("Your session has expired. Please refresh the page.")(t):Q(a)(t)},ae=J("LOGIN"),ne=J("SIGNUP"),re={accessToken:null,refreshToken:I.a.get("refreshToken"),loginLoading:!1,loginError:null,signupLoading:!1,signupError:null};var ce=function(e){var t=e.username,a=e.password;return function(e){e($(ae.REQUEST)),D.a.post("".concat(M,"/jwt/create/"),{username:t,password:a}).then((function(t){e($(ae.SUCCESS,t.data))})).catch((function(t){Q("Unable to log in.")(e),e($(ae.FAILURE,t))}))}},ie=function(e){return e.authReducer.refreshToken},oe=function(e){return e.authReducer.accessToken},le=function(e){return e.authReducer.loginLoading},se=function(e){return e.authReducer.loginError};var ue={authLogin:ce},me=Object(o.b)((function(){return{}}),ue)((function(e){var t=e.authLogin;return r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Log In")),r.a.createElement("h1",null,"Log In"),r.a.createElement("div",{className:"box my-20"},r.a.createElement(L,{onSubmit:t})),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(v.b,{to:"/signup"},"Sign up here")))})),de=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Logged Out")),r.a.createElement("h1",null,"You have logged out."),r.a.createElement("p",null,"We hope you come back soon!"),r.a.createElement(j,{isLink:!0,to:"/",icon:p.c},"Return to Home"))}}]),a}(n.Component),Ee={logout:function(){return function(e){e($("LOGOUT"))}}},ve=Object(o.b)((function(){return{}}),Ee)(de),fe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",username:"",password:"",password2:""},e.handleChange=function(t){e.setState(Object(N.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,r=a.username,c=a.password;c===a.password2?e.props.onSubmit({email:n,username:r,password:c}):alert("Passwords don't match")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.username,n=e.password,c=e.password2;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",type:"email",onChange:this.handleChange,value:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"username",type:"text",onChange:this.handleChange,value:a,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{autoComplete:"new-password",name:"password",type:"password",onChange:this.handleChange,value:n,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{name:"password2",type:"password",onChange:this.handleChange,value:c,required:!0})),r.a.createElement(j,{icon:p.h},"Submit"))}}]),a}(n.Component);var pe={signup:function(e){var t=e.email,a=e.username,n=e.password;return function(e){e($(ne.REQUEST)),D.a.post("".concat(M,"/users/"),{email:t,username:a,password:n}).then((function(t){e($(ne.SUCCESS,t.data)),ce({username:a,password:n})(e)})).catch((function(t){Q("Unable to sign up.")(e),e($(ne.FAILURE,t))}))}}},he=Object(o.b)((function(){return{}}),pe)((function(e){var t=e.signup;return r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Sign Up")),r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:"box my-20"},r.a.createElement(fe,{onSubmit:t})),r.a.createElement("p",null,"Already have an account? ",r.a.createElement(v.b,{to:"/login"},"Log in here")))})),be=a(61);a(92);function ye(e){var t=e.options,a=e.value,n=e.onChange,c=e.disabled,i=e.required,o=Object(b.a)(e,["options","value","onChange","disabled","required"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,Object.assign({className:"select-container",classNamePrefix:"select",placeholder:"Select an option",components:{IndicatorSeparator:function(){return null}},options:t,disabled:c,value:a?t.find((function(e){return e.value===a})):null,onChange:function(e){return n(e.value)}},o)),!c&&i&&r.a.createElement("input",{tabIndex:-1,autoComplete:"off",style:{opacity:0,height:0,padding:0,margin:0},value:a||"",onChange:function(){},required:!0}))}var ge=J("TIMEZONES"),Oe={items:[],loading:!0,error:null};var je=function(e){return!0===e.timezonesReducer.loading},Ce=function(e){return e.timezonesReducer.error},Se=function(e){return e.timezonesReducer.items};var Re={listTimezones:function(){return function(e){e($(ge.REQUEST)),D.a.get("".concat(V,"/timezones/")).then((function(t){e($(ge.SUCCESS,t.data))})).catch((function(t){te(t,e,"Unable to fetch timezones."),e($(ge.FAILURE,t))}))}}},Te=Object(o.b)((function(e){return{timezones:Se(e),timezonesLoading:je(e),timezonesError:Ce(e)}}),Re)((function(e){var t=e.timezones,a=e.timezonesLoading,c=e.listTimezones;Object(n.useEffect)(c,[c]);var i=[];return t&&(i=t.map((function(e){return{value:e,label:e.replace("_"," ")}}))),r.a.createElement(ye,Object.assign({placeholder:"Select a timezone",isLoading:a,options:i},e))})),ke=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={timezone:null},e.handleTimezoneChange=function(t){e.setState({timezone:t})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.timezone;e.props.onSubmit({timezone:a})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.profile.timezone;this.setState({timezone:e})}},{key:"render",value:function(){var e=this.state.timezone;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"timezone"},"Timezone"),r.a.createElement(Te,{id:"timezone",onChange:this.handleTimezoneChange,value:e,required:!0})),r.a.createElement(j,{icon:p.k},"Save"))}}]),a}(n.Component),Ne=X("profile"),Le=function(e){return!0===e.profileReducer.loading[K.RETRIEVE]},Ae=function(e){return e.profileReducer.error[K.RETRIEVE]},we=function(e){return e.profileReducer.item};var De={retrieveProfile:function(){return function(e,t){e(Z("profile",W,K.RETRIEVE)),D.a.get("".concat(V,"/").concat("profile","/"),ee(t)).then((function(t){e(Z("profile",B,K.RETRIEVE,t.data))})).catch((function(t){te(t,e,"Unable to fetch profile."),e(Z("profile",G,K.RETRIEVE,t))}))}},updateProfile:function(e){var t=e.timezone;return function(e,a){e(Z("profile",W,K.UPDATE)),D.a.patch("".concat(V,"/").concat("profile","/"),{timezone:t},ee(a)).then((function(t){e(Z("profile",B,K.UPDATE,t.data))})).catch((function(t){te(t,e,"Unable to update profile."),e(Z("profile",G,K.UPDATE,t))}))}}},Ue=Object(o.b)((function(e){return{profile:we(e),profileLoading:Le(e),profileError:Ae(e)}}),De)((function(e){var t=e.retrieveProfile,a=e.updateProfile,c=e.profile,i=e.profileLoading,o=e.profileError;return Object(n.useEffect)(t,[t]),i?r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Profile")),r.a.createElement(C,{breadcrumbs:[{title:"Home",to:"/"},{title:"Profile"}]}),r.a.createElement("h1",null,"Profile"),r.a.createElement(f,null)):!c||o?r.a.createElement(E.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Profile")),r.a.createElement(C,{breadcrumbs:[{title:"Home",to:"/"},{title:"Profile"}]}),r.a.createElement("h1",null,"Profile"),r.a.createElement(ke,{profile:c,onSubmit:a}))})),Ie=[{path:"/login",exact:!0,component:me},{path:"/signup",exact:!0,component:he},{path:"/logout",exact:!0,component:ve}],_e=[{path:"/logout",exact:!0,component:ve},{path:"/profile",exact:!0,component:Ue}],Me=(a(93),document.getElementById("modal-root")),Ve=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleKeyDown=function(e){switch(e.keyCode){case 27:n.handleClose()}},n.handleClose=function(){var e=n.props.onVisibilityChange;n.setState({draftIsVisible:!1}),e&&e(!1)},n.state={draftIsVisible:!1},n.el=document.createElement("div"),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),Me.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),Me.removeChild(this.el)}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,n=e.isVisible,c=(e.onVisibilityChange,Object(b.a)(e,["title","children","isVisible","onVisibilityChange"])),o=this.state.draftIsVisible,l=null!==n&&void 0!==n?n:o;return i.a.createPortal(r.a.createElement("div",Object.assign({className:"modal".concat(l?"":" modal-hide")},c),r.a.createElement("div",{className:"modal-bg",onClick:this.handleClose}),r.a.createElement("div",{className:"modal-content"},t&&r.a.createElement("div",{className:"modal-header"},r.a.createElement("p",{className:"modal-title"},t),r.a.createElement(j,{className:"modal-close-button",color:"white",icon:p.m,onClick:this.handleClose})),a)),this.el)}}]),a}(n.Component),qe=J("COLORS"),Pe={items:[],loading:!0,error:null};var xe=function(){return function(e){e($(qe.REQUEST)),D.a.get("".concat(V,"/colors/")).then((function(t){e($(qe.SUCCESS,t.data))})).catch((function(t){te(t,e,"Unable to fetch colours."),e($(qe.FAILURE,t))}))}},Fe=function(e){return!0===e.colorsReducer.loading},ze=function(e){return e.colorsReducer.error},Ye=function(e){return e.colorsReducer.items},Qe=function(e){return{alignItems:"center",display:"flex",":before":{backgroundColor:e,borderRadius:15,content:'""',display:"block",marginRight:10,height:15,width:15}}},He={option:function(e,t){var a=t.data;return Object(A.a)(Object(A.a)({},e),Qe(a.hex_code))},singleValue:function(e,t){var a=t.data;return Object(A.a)(Object(A.a)({},e),Qe(a.hex_code))}};var We={listColors:xe},Be=Object(o.b)((function(e){return{colors:Ye(e),colorsLoading:Fe(e),colorsError:ze(e)}}),We)((function(e){var t=e.colors,a=e.colorsLoading,c=e.listColors;Object(n.useEffect)(c,[c]);var i=[];return t&&(i=t.map((function(e){return{value:e.id,label:e.title,hex_code:e.hex_code}}))),r.a.createElement(ye,Object.assign({placeholder:"Select a color",isLoading:a,options:i,styles:He,isSearchable:!1},e))})),Ge=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",description:"",frequency:"",color:void 0},e.reset=function(t){if(t){var a=t.title,n=t.description,r=t.frequency,c=t.color;e.setState({title:a,description:n,frequency:null===r?"":r,color:c})}else e.setState({title:"",description:"",frequency:"",color:void 0})},e.handleChange=function(t){e.setState(Object(N.a)({},t.target.name,t.target.value))},e.handleColorChange=function(t){e.setState({color:t})},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.title,r=a.description,c=a.frequency,i=a.color;e.props.onSubmit({title:n,description:r,frequency:parseInt(c),color:i})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.frequency,c=e.color;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",name:"title",type:"text",maxLength:"200",onChange:this.handleChange,value:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",name:"description",onChange:this.handleChange,value:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"frequency"},"Frequency"),r.a.createElement("input",{id:"frequency",name:"frequency",type:"number",min:1,step:1,onChange:this.handleChange,value:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"color"},"Color"),r.a.createElement(Be,{id:"color",name:"color",onChange:this.handleColorChange,value:c,required:!0})),r.a.createElement(j,{icon:p.h},"Submit"))}}]),a}(n.Component),Ke=function(e){if(e){var t=e.split("\n");return t.map((function(e,a){return r.a.createElement(n.Fragment,{key:a},e,a+1<t.length?r.a.createElement("br",null):"")}))}return e};a(94);function Je(e){var t=new Date,a=Object(n.useRef)(),c=e.days_since,i=e.frequency,o=e.color,l=i-c,s=function(e){return e>=0?1===e?"1 day\nleft":e>99?">99 days\nleft":"".concat(e," days\nleft"):-1===e?"1 day\nlate":e<-99?">99 days\nlate":"".concat(Math.abs(e)," days\nlate")}(l),u=c/i;Object(n.useEffect)((function(){var e=a.current;if(e){var n=e.getContext("2d");!function a(){var r=e.width,c=e.height,i=r/2,l=c/2,s=new Date-t,m=s<800?Math.pow(Math.sin(Math.PI*(s/800)/2),2):1;n.globalCompositeOperation="destination-over",n.clearRect(0,0,r,c),n.save(),n.fillStyle=o,n.beginPath(),n.moveTo(i,l),n.arc(i,l,r/2,-Math.PI/2,-Math.PI/2+2*u*Math.PI*m),n.lineTo(i,l),n.closePath(),n.fill(),n.restore(),s<800&&requestAnimationFrame(a)}()}}),[t,o,u]);var m=r.a.createElement("div",{className:"inner-circle"},r.a.createElement("p",null,Ke(s)),r.a.createElement("p",{className:"mobile-text"},Math.abs(l)<=99?"".concat(Math.abs(l),"d"):">99d",r.a.createElement("br",null),"".concat(l>=0?"left":"late")));return l>=0?r.a.createElement("div",{className:"progress-circle"},r.a.createElement("canvas",{className:"outer-circle",ref:a,height:"200px",width:"200px"}),m):r.a.createElement("div",{className:"progress-circle overdue",style:{backgroundColor:o}},r.a.createElement("div",{className:"outer-circle"}),m)}var $e=1,Ze=2,Xe=[{value:$e,label:"Completed"},{value:Ze,label:"Skipped"}];function et(e){return 1===e?"Everyday":2===e?"Every other day":7===e?"Every week":14===e?"Every other week":e%7===0?"Every ".concat(Math.round(e/7)," weeks"):"Every ".concat(e," days")}var tt=X("activities"),at=function(e){return!0===e.activitiesReducer.loading[K.LIST]},nt=function(e){return e.activitiesReducer.error[K.LIST]},rt=function(e){return e.activitiesReducer.items},ct=function(e){return!0===e.activitiesReducer.loading[K.RETRIEVE]},it=function(e){return e.activitiesReducer.error[K.RETRIEVE]},ot=function(e){return e.activitiesReducer.item},lt=function(e){return e.activitiesReducer.itemId},st=X("activityevents"),ut=function(e){return!0===e.activityEventsReducer.loading[K.LIST]},mt=function(e){return e.activityEventsReducer.error[K.LIST]},dt=function(e){return e.activityEventsReducer.items};a(95);function Et(e){switch(e){case $e:return"Last completed";case Ze:return"Last skipped";default:return"Created"}}function vt(e){return e<0?"".concat(Math.abs(e)," days in the future"):0===e?"today":1===e?"yesterday":e<7?"".concat(e," days ago"):e>=7&&e<14?"last week":Math.floor(e/7)>99?">99 weeks ago":"".concat(Math.floor(e/7)," weeks ago")}var ft={performEvent:function(e,t){return function(a,n){a(Z("activityevents",W,K.CREATE)),D.a.post("".concat(V,"/activities/").concat(e,"/events/"),{event_type:t},ee(n)).then((function(n){a(Z("activityevents",B,K.CREATE,n.data)),a(Z("activities",B,K.UPDATE,{id:e,days_since:0,last_event_type:t,todays_event:t}))})).catch((function(e){te(e,a,"Unable to perform event."),a(Z("activityevents",G,K.CREATE,e))}))}}},pt=Object(o.b)((function(){return{}}),ft)((function(e){var t=e.id,a=e.title,n=e.days_since,c=e.frequency,i=e.color,o=e.last_event_type,l=e.todays_event,s=e.performEvent,u=r.a.createElement("div",null,r.a.createElement(j,{icon:p.b,className:"mr-10",onClick:function(){return s(t,$e)}}),r.a.createElement(j,{color:"white",icon:p.g,onClick:function(){return s(t,Ze)}}));if(l)switch(l){case $e:u=r.a.createElement("p",{className:"todays-event"},r.a.createElement(y.a,{className:"mr-10",icon:p.b}),"Completed");break;case Ze:u=r.a.createElement("p",{className:"todays-event"},r.a.createElement(y.a,{className:"mr-10",icon:p.g}),"Skipped")}return c?r.a.createElement("div",{className:"activity-element"},r.a.createElement(Je,{days_since:n,frequency:c,color:i}),r.a.createElement("div",null,r.a.createElement("div",{className:"mb-10"},r.a.createElement("h3",{className:"activity-title mb-0"},r.a.createElement(v.b,{to:"/days-since/".concat(t)},a)),r.a.createElement("p",null,et(c)," \u2022 ",Et(o)," ",vt(n))),u)):r.a.createElement("div",{className:"activity-element"},r.a.createElement("div",null,r.a.createElement("div",{className:"mb-10"},r.a.createElement("h4",{className:"activity-title mb-0"},r.a.createElement(v.b,{to:"/days-since/".concat(t)},a)),r.a.createElement("p",null,Et(o)," ",vt(n))),u))})),ht=(a(96),a(57)),bt=a.n(ht),yt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapActivitiesToActivityElements=function(e){return e.map((function(e){var t=e.id,a=e.title,c=e.frequency,i=e.days_since,o=e.color,l=e.last_event_type,s=e.todays_event;return r.a.createElement(pt,{key:t,id:t,title:a,frequency:c,days_since:i,color:n.props.colors.find((function(e){return e.id===o})).hex_code,last_event_type:l,todays_event:s})}))},e.listActivities(),e.listColors(),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.openCreateModal,a=e.activities,n=e.activitiesLoading,c=e.activitiesError,i=e.colors,o=e.colorsLoading,l=e.colorsError;if(n||o)return r.a.createElement("div",null,r.a.createElement("h2",null,"Activities"),r.a.createElement(f,null));if(!a||c||!i||l)return r.a.createElement(E.a,{to:"/"});var s=a.reduce((function(e,t){return e[null!==t.frequency&&void 0!==t.frequency].push(t),e}),{true:[],false:[]});return s.true.sort((function(e,t){return e.frequency-e.days_since-(t.frequency-t.days_since)})),s.false.sort((function(e,t){return e.days_since-t.days_since})),r.a.createElement("div",null,r.a.createElement("h2",null,"Activities"),r.a.createElement("div",{className:"mb-20"},r.a.createElement(j,{icon:p.i,color:"blue",onClick:t},"Create Activity")),0!==s.true.length&&r.a.createElement("div",null,r.a.createElement("h3",null,"With Frequency"),r.a.createElement("div",{className:"grid activity-list"},this.mapActivitiesToActivityElements(s.true))),0!==s.false.length&&r.a.createElement("div",null,r.a.createElement("h3",null,"Without Frequency"),r.a.createElement("div",{className:"grid activity-list"},this.mapActivitiesToActivityElements(s.false))),0===a.length&&r.a.createElement("div",{className:"grid mt-40"},r.a.createElement("div",{className:"activity-list-empty center"},r.a.createElement("img",{className:"mb-20",src:bt.a,alt:"Empty street"}),r.a.createElement("h3",null,"No Activities"))))}}]),a}(n.Component),gt={listActivities:function(){return function(e,t){e(Z("activities",W,K.LIST)),D.a.get("".concat(V,"/").concat("activities","/"),ee(t)).then((function(t){e(Z("activities",B,K.LIST,t.data))})).catch((function(t){te(t,e,"Unable to fetch activities."),e(Z("activities",G,K.LIST,t))}))}},listColors:xe},Ot=Object(o.b)((function(e){return{activities:rt(e),activitiesLoading:at(e),activitiesError:nt(e),colors:Ye(e),colorsLoading:Fe(e),colorsError:ze(e)}}),gt)(yt),jt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Object(N.a)({},q,!1),e.handleVisibilityChange=function(t){e.setState(Object(N.a)({},q,t))},e.openCreateModal=function(){e.setState(Object(N.a)({},q,!0)),e.activityFormRef.reset()},e.handleCreateActivity=function(t){e.setState(Object(N.a)({},q,!1)),e.props.createActivity(t)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Days Since")),r.a.createElement(C,{breadcrumbs:[{title:"Home",to:"/"},{title:"Days Since"}]}),r.a.createElement("h1",null,"Days Since"),r.a.createElement(Ot,{openCreateModal:this.openCreateModal}),r.a.createElement(Ve,{title:"Create Activity",isVisible:this.state[q],onVisibilityChange:this.handleVisibilityChange},r.a.createElement(Ge,{onSubmit:this.handleCreateActivity,ref:function(t){return e.activityFormRef=t}})))}}]),a}(n.Component),Ct={createActivity:function(e){var t=e.title,a=e.description,n=e.frequency,r=e.color;return function(e,c){e(Z("activities",W,K.CREATE)),D.a.post("".concat(V,"/").concat("activities","/"),{title:t,description:a,frequency:n,color:r},ee(c)).then((function(t){e(Z("activities",B,K.CREATE,Object(A.a)(Object(A.a)({},t.data),{},{days_since:0})))})).catch((function(t){te(t,e,"Unable to create activity."),e(Z("activities",G,K.CREATE,t))}))}}},St=Object(o.b)((function(){return{}}),Ct)(jt),Rt=a(23),Tt=a.n(Rt),kt=a(58),Nt=a.n(kt);a(106),a(107);function Lt(e){var t=e.onChange,a=e.placeholder,n=e.required,c=Object(b.a)(e,["onChange","placeholder","required"]);return r.a.createElement("div",{className:"date-picker"},r.a.createElement(Nt.a,Object.assign({formatDate:function(e,t){return Tt()(e).format(t)},parseDate:function(e,t){return Tt()(e,t).toDate()},format:"D MMMM YYYY",placeholder:a||"",onDayChange:t,inputProps:{required:n,readOnly:!0}},c)),r.a.createElement(y.a,{icon:p.a,className:"calendar-icon"}))}var At=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={event_type:"",date:"",description:""},e.reset=function(t){if(t){var a=t.event_type,n=t.date,r=t.description;e.setState({event_type:a,date:Tt()(n,"YYYY-MM-DD").toDate(),description:r})}else e.setState({event_type:$e,date:new Date,description:""})},e.handleChange=function(t){e.setState(Object(N.a)({},t.target.name,t.target.value))},e.handleEventTypeChange=function(t){e.setState({event_type:t})},e.handleDateChange=function(t){e.setState({date:t})},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.event_type,r=a.date,c=a.description;e.props.onSubmit({event_type:n,date:Tt()(r).format("YYYY-MM-DD"),description:c})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.event_type,a=e.date,n=e.description;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"event_type"},"Event Type"),r.a.createElement(ye,{id:"event_type",onChange:this.handleEventTypeChange,value:t,options:Xe,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement(Lt,{value:a,onChange:this.handleDateChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",name:"description",onChange:this.handleChange,value:n})),r.a.createElement(j,{icon:p.h},"Submit"))}}]),a}(n.Component);function wt(e){var t=e.onSubmit;return r.a.createElement("div",{className:"btn-group btn-group"},r.a.createElement(j,{icon:p.n,color:"red",onClick:function(){return t(!0)}},"Confirm"),r.a.createElement(j,{color:"faded-grey",onClick:function(){return t(!1)}},"Cancel"))}var Dt=a(59),Ut=a.n(Dt);a(108);function It(e){var t=e.event,a=t.id,n=t.event_type,c=t.date,i=t.description,o=e.event,l=e.isEditable,s=e.openEditModal,u=e.openDeleteModal,m=Tt()(c).format("D MMMM YYYY"),d="";switch(n){case $e:d=r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:"mr-10",icon:p.b}),"Completed");break;case Ze:d=r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:"mr-10",icon:p.g}),"Skipped");break;default:d=r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:"mr-10",icon:p.j}),"Unknown event")}return r.a.createElement("div",{key:a,className:"event-item"},r.a.createElement("div",{className:"mb-n10"},r.a.createElement("p",null,d," on ",m),r.a.createElement("p",{className:"small"},Ke(i))),l&&r.a.createElement("div",{className:"btn-group mt-20"},r.a.createElement(j,{icon:p.f,color:"green",size:"sm",onClick:function(){return s(o)}}),r.a.createElement(j,{icon:p.n,color:"red",size:"sm",onClick:function(){return u(o)}})))}var _t=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;Object(s.a)(this,a),(r=t.call(this,e)).state=(n={modalEvent:null},Object(N.a)(n,q,!1),Object(N.a)(n,P,!1),Object(N.a)(n,x,!1),Object(N.a)(n,"isEditable",!1),n),r.handleVisibilityChange=function(e,t){r.setState(Object(N.a)({},e,t))},r.openModal=function(e,t){var a;r.setState((a={},Object(N.a)(a,e,!0),Object(N.a)(a,"modalEvent",t),a)),e===q?r.createFormRef.reset():e===P&&r.editFormRef.reset(t)},r.handleCreateEvent=function(e){var t=r.props,a=t.activityId,n=t.createActivityEvent;r.setState(Object(N.a)({},q,!1)),n(a,e)},r.handleEditEvent=function(e){var t=r.props,a=t.activityId,n=t.updateActivityEvent;r.setState(Object(N.a)({},P,!1)),n(a,Object(A.a)(Object(A.a)({},r.state.modalEvent),e))},r.handleDeleteEvent=function(e){var t=r.props,a=t.activityId,n=t.deleteActivityEvent;r.setState(Object(N.a)({},x,!1)),e&&n(a,r.state.modalEvent.id)};var c=e.activityId;return e.listActivityEvents(c),r}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.activityEvents,n=t.activityEventsLoading,c=t.activityEventsError,i=this.state.isEditable;return n?r.a.createElement("div",null,r.a.createElement("h2",null,"Events"),r.a.createElement(f,null)):!a||c?r.a.createElement(E.a,{to:"/days-since"}):(a.sort((function(e,t){return Tt()(e.date,"YYYY-MM-DD").toDate()-Tt()(t.date,"YYYY-MM-DD").toDate()})).reverse(),r.a.createElement("div",null,r.a.createElement("h2",null,"Events"),r.a.createElement("div",{className:"btn-group mb-20"},r.a.createElement(j,{icon:p.i,color:"blue",onClick:function(){return e.openModal(q)}},"Create Event"),i?r.a.createElement(j,{className:"ml-auto mr-0",color:"faded-grey",onClick:function(){return e.setState({isEditable:!1})}},"Done"):r.a.createElement(j,{className:"ml-auto mr-0",color:"green",onClick:function(){return e.setState({isEditable:!0})}},"Edit")),0!==a.length?r.a.createElement("div",{className:"box"},a.map((function(t){return r.a.createElement(It,{key:t.id,event:t,isEditable:i,openEditModal:function(t){return e.openModal(P,t)},openDeleteModal:function(t){return e.openModal(x,t)}})}))):r.a.createElement("div",{className:"center mt-40"},r.a.createElement("img",{className:"mb-20",src:Ut.a,alt:"Trees under the sun"}),r.a.createElement("h3",null,"No Events")),r.a.createElement(Ve,{title:"Create Event",isVisible:this.state[q],onVisibilityChange:function(t){return e.handleVisibilityChange(q,t)}},r.a.createElement(At,{onSubmit:this.handleCreateEvent,ref:function(t){return e.createFormRef=t}})),r.a.createElement(Ve,{title:"Edit Event",isVisible:this.state[P],onVisibilityChange:function(t){return e.handleVisibilityChange(P,t)}},r.a.createElement(At,{onSubmit:this.handleEditEvent,ref:function(t){return e.editFormRef=t}})),r.a.createElement(Ve,{title:"Delete Event",isVisible:this.state[x],onVisibilityChange:function(t){return e.handleVisibilityChange(x,t)}},r.a.createElement(wt,{onSubmit:this.handleDeleteEvent}))))}}]),a}(n.Component),Mt={createActivityEvent:function(e,t){var a=t.event_type,n=t.date,r=t.description;return function(t,c){t(Z("activityevents",W,K.CREATE)),D.a.post("".concat(V,"/activities/").concat(e,"/events/"),{event_type:a,date:n,description:r},ee(c)).then((function(e){t(Z("activityevents",B,K.CREATE,e.data))})).catch((function(e){te(e,t,"Unable to create event."),t(Z("activityevents",G,K.CREATE,e))}))}},updateActivityEvent:function(e,t){var a=t.id,n=t.event_type,r=t.date,c=t.description;return function(t,i){t(Z("activityevents",W,K.UPDATE,a)),D.a.patch("".concat(V,"/activities/").concat(e,"/events/").concat(a,"/"),{event_type:n,date:r,description:c},ee(i)).then((function(e){t(Z("activityevents",B,K.UPDATE,e.data))})).catch((function(e){te(e,t,"Unable to update event."),t(Z("activityevents",G,K.UPDATE,e))}))}},deleteActivityEvent:function(e,t){return function(a,n){a(Z("activityevents",W,K.DELETE)),D.a.delete("".concat(V,"/activities/").concat(e,"/events/").concat(t,"/"),ee(n)).then((function(){a(Z("activityevents",B,K.DELETE,t))})).catch((function(e){te(e,a,"Unable to delete event."),a(Z("activityevents",G,K.DELETE,e))}))}},listActivityEvents:function(e){return function(t,a){t(Z("activityevents",W,K.LIST)),D.a.get("".concat(V,"/activities/").concat(e,"/events/"),ee(a)).then((function(e){t(Z("activityevents",B,K.LIST,e.data))})).catch((function(e){te(e,t,"Unable to fetch events."),t(Z("activityevents",G,K.LIST,e))}))}}},Vt=Object(o.b)((function(e){return{activityEvents:dt(e),activityEventsLoading:ut(e),activityEventsError:mt(e)}}),Mt)(_t),qt=(a(109),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;Object(s.a)(this,a),(r=t.call(this,e)).state=(n={},Object(N.a)(n,P,!1),Object(N.a)(n,x,!1),n),r.handleVisibilityChange=function(e,t){r.setState(Object(N.a)({},e,t))},r.openModal=function(e){r.setState(Object(N.a)({},e,!0)),e===P&&r.activityFormRef.reset(r.props.activity)},r.handleEditActivity=function(e){r.setState(Object(N.a)({},P,!1)),r.props.updateActivity(Object(A.a)(Object(A.a)({},r.props.activity),e))},r.handleDeleteActivity=function(e){var t=r.props,a=t.activity,n=t.deleteActivity;r.setState(Object(N.a)({},x,!1)),e&&n(a.id)};var c=e.match.params.activityId;return e.retrieveActivity(c),r}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.activity,n=t.activityId,c=t.activityLoading,i=t.activityError,o=t.match.params;if(c||n!==o.activityId)return r.a.createElement(f,null);if(!a||i)return r.a.createElement(E.a,{to:"/days-since"});var l=a.title,s=a.description,u=a.frequency;return r.a.createElement("div",{className:"container"},r.a.createElement(h.a,null,r.a.createElement("title",null,"Days Since | ".concat(l))),r.a.createElement(C,{breadcrumbs:[{title:"Home",to:"/"},{title:"Days Since",to:"/days-since"},{title:l}]}),r.a.createElement("div",{className:"grid activity-detail"},r.a.createElement("div",null,r.a.createElement("div",{className:"mb-20"},r.a.createElement("h1",null,l),s&&r.a.createElement("p",null,Ke(s)),u&&r.a.createElement("p",null,"Frequency: ",et(u))),r.a.createElement("div",{className:"btn-group"},r.a.createElement(j,{icon:p.f,color:"green",onClick:function(){return e.openModal(P)}},"Edit"),r.a.createElement(j,{icon:p.n,color:"red",onClick:function(){return e.openModal(x)}},"Delete"))),r.a.createElement(Vt,{activityId:n})),r.a.createElement(Ve,{title:"Edit Activity",isVisible:this.state[P],onVisibilityChange:function(t){return e.handleVisibilityChange(P,t)}},r.a.createElement(Ge,{onSubmit:this.handleEditActivity,ref:function(t){return e.activityFormRef=t}})),r.a.createElement(Ve,{title:"Delete Activity",isVisible:this.state[x],onVisibilityChange:function(t){return e.handleVisibilityChange(x,t)}},r.a.createElement(wt,{onSubmit:this.handleDeleteActivity})))}}]),a}(n.Component)),Pt={retrieveActivity:function(e){return function(t,a){t(Z("activities",W,K.RETRIEVE,e)),D.a.get("".concat(V,"/").concat("activities","/").concat(e,"/"),ee(a)).then((function(e){t(Z("activities",B,K.RETRIEVE,e.data))})).catch((function(e){te(e,t,"Unable to fetch activity."),t(Z("activities",G,K.RETRIEVE,e))}))}},updateActivity:function(e){var t=e.id,a=e.title,n=e.description,r=e.frequency,c=e.color;return function(e,i){e(Z("activities",W,K.UPDATE,t)),D.a.patch("".concat(V,"/").concat("activities","/").concat(t,"/"),{title:a,description:n,frequency:r,color:c},ee(i)).then((function(t){e(Z("activities",B,K.UPDATE,t.data))})).catch((function(t){te(t,e,"Unable to update activity."),e(Z("activities",G,K.UPDATE,t))}))}},deleteActivity:function(e){return function(t,a){t(Z("activities",W,K.DELETE)),D.a.delete("".concat(V,"/").concat("activities","/").concat(e,"/"),ee(a)).then((function(){t(Z("activities",B,K.DELETE,e))})).catch((function(e){te(e,t,"Unable to delete activity."),t(Z("activities",G,K.DELETE,e))}))}}},xt=[{path:"/days-since",exact:!0,component:St},{path:"/days-since/:activityId",exact:!0,component:Object(o.b)((function(e){return{activity:ot(e),activityId:lt(e),activityLoading:ct(e),activityError:it(e)}}),Pt)(qt)}],Ft=(a(110),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.errors,a=e.closeError;return r.a.createElement("div",{className:"error-wrapper"},t.map((function(e){var t=e.id,n=e.isVisible,c=e.message;return r.a.createElement("div",{className:"box error".concat(n?"":" error-hide"),key:t},r.a.createElement("div",{className:"error-header"},r.a.createElement("p",{className:"m-0"},"Error"),r.a.createElement(j,{className:"error-close-button",color:"white",icon:p.m,onClick:function(){return a(t)}})),r.a.createElement("p",{className:"m-0"},c))})))}}]),a}(n.Component)),zt={closeError:function(e){return function(t){t(z(e)),setTimeout((function(){return t(Y(e))}),2e3)}}},Yt=Object(o.b)((function(e){return{errors:H(e)}}),zt)(Ft),Qt=function(e){var t=new URLSearchParams(e.location.search).get("next");return r.a.createElement(E.a,{to:"/".concat(t||"")})},Ht=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.refreshToken,a=e.refreshTokenLogin;t&&a()}},{key:"render",value:function(){var e=this.props,t=e.loginLoading,a=e.loginError,n=e.refreshToken,c=e.accessToken;if(n&&!c||t)return r.a.createElement(f,null);if(!c||a)return r.a.createElement(v.a,null,r.a.createElement(Yt,null),r.a.createElement(E.d,null,Ie.map((function(e,t){return r.a.createElement(E.b,Object.assign({key:t},e))})),r.a.createElement(E.a,{from:"/:next",exact:!0,to:"/login?next=:next"}),r.a.createElement(E.a,{from:"/",exact:!0,to:"/login"})));var i=[].concat(Object(l.a)(_e),Object(l.a)(xt));return r.a.createElement(v.a,null,r.a.createElement(Yt,null),r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/",exact:!0,component:S}),i.map((function(e,t){return r.a.createElement(E.b,Object.assign({key:t},e))})),Ie.map((function(e,t){return r.a.createElement(E.a,{key:"auth-".concat(t),from:e.path,exact:!0,to:"/"})})),r.a.createElement(E.b,{path:"/login",exact:!0,component:Qt}),r.a.createElement(E.b,{path:"/not-found",exact:!0,component:k}),r.a.createElement(E.a,{from:"/",to:"/not-found"})))}}]),a}(n.Component),Wt={refreshTokenLogin:function(){return function(e,t){e($(ae.REQUEST));var a=t().authReducer.refreshToken;D.a.post("".concat(M,"/jwt/refresh/"),{refresh:a}).then((function(t){e($(ae.SUCCESS,Object(A.a)(Object(A.a)({},t.data),{},{refresh:a})))})).catch((function(t){Q("Unable to log in.")(e),e($(ae.FAILURE,t))}))}}},Bt=Object(o.b)((function(e){return{loginLoading:le(e),loginError:se(e),refreshToken:ie(e),accessToken:oe(e)}}),Wt)(Ht),Gt=a(24),Kt=a(60),Jt=Object(Gt.c)({errorsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_DISPLAY":return Object(A.a)(Object(A.a)({},e),{},{errors:[].concat(Object(l.a)(e.errors),[t.payload])});case"ERROR_CLOSE":return Object(A.a)(Object(A.a)({},e),{},{errors:e.errors.map((function(e){return e.id===t.payload?Object(A.a)(Object(A.a)({},e),{},{isVisible:!1}):e}))});case"ERROR_REMOVE":return Object(A.a)(Object(A.a)({},e),{},{errors:e.errors.filter((function(e){return e.id!==t.payload}))});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.REQUEST:return Object(A.a)(Object(A.a)({},e),{},{loginLoading:!0,loginError:null});case ae.SUCCESS:var a=t.payload,n=a.access,r=a.refresh;return I.a.set("refreshToken",r),Object(A.a)(Object(A.a)({},e),{},{accessToken:n,refreshToken:r,loginLoading:!1});case ae.FAILURE:return I.a.remove("refreshToken"),Object(A.a)(Object(A.a)({},e),{},{accessToken:null,refreshToken:null,loginLoading:!1,loginError:t.payload});case ne.REQUEST:return Object(A.a)(Object(A.a)({},e),{},{signupLoading:!0,signupError:null});case ne.SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{signupLoading:!1});case ne.FAILURE:return Object(A.a)(Object(A.a)({},e),{},{signupLoading:!1,signupError:t.payload});case"LOGOUT":return I.a.remove("refreshToken"),Object(A.a)(Object(A.a)({},e),{},{accessToken:null,refreshToken:null});default:return e}},colorsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe.REQUEST:return Object(A.a)(Object(A.a)({},e),{},{loading:!0,error:null});case qe.SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{items:t.payload,loading:!1});case qe.FAILURE:return Object(A.a)(Object(A.a)({},e),{},{loading:!1,error:t.payload});default:return e}},timezonesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge.REQUEST:return Object(A.a)(Object(A.a)({},e),{},{loading:!0,error:null});case ge.SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{items:t.payload,loading:!1});case ge.FAILURE:return Object(A.a)(Object(A.a)({},e),{},{loading:!1,error:t.payload});default:return e}},profileReducer:Ne,activitiesReducer:tt,activityEventsReducer:st}),$t=[Kt.a],Zt=Object(Gt.e)(Jt,{},Object(Gt.d)(Gt.a.apply(void 0,$t)));var Xt=function(){return r.a.createElement(o.a,{store:Zt},r.a.createElement(Bt,null))};a(111);i.a.render(r.a.createElement(Xt,null),document.getElementById("app-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,a){e.exports=a.p+"static/media/not-found.b882863e.svg"},57:function(e,t,a){e.exports=a.p+"static/media/empty.afc6d931.svg"},59:function(e,t,a){e.exports=a.p+"static/media/empty.ca39146a.svg"},62:function(e,t,a){e.exports=a(112)},71:function(e,t,a){},74:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.2fbcb484.chunk.js.map